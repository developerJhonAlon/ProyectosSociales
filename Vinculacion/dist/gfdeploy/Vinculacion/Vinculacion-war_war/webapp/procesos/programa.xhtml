<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:pe="http://primefaces.org/ui/extensions"
      >
    <h:body>    
        <ui:composition template="/vista/template-sistema2.xhtml">
            <ui:define name="content">
                <style>
                    .ui-panel .ui-panel-content {
                        padding: 0;
                    }
                    .centrado{
                        text-align: center;
                    }
                    .col1_objetivos {
                        width: 80px;
                    }
                    .col1_actividad {
                        width: 180px;
                    }
                    .inputNumberPorcentaje input
                    {
                        width: 30px !important;
                    }
                    .hide-column-names table thead tr {
                        display: none;
                    }

                </style>                


                <p:panel style="border: hidden; margin-bottom: 35px">
                    <h:panelGrid id="panelTitulo" columns="1" width="100%" columnClasses="centrado" style="background: rgb(39, 124, 75) none repeat">
                        <p:outputLabel value="#{programaController.nombreProgSeleccionado}" style="color: white; font-weight: bold;" ></p:outputLabel>
                        <p:outputLabel value="ESTADO ACTUAL: #{programaController.programaSelected.estadoStr}" style="color: white; font-weight: bold;" ></p:outputLabel>
                    </h:panelGrid>

                    <h:panelGrid columns="3" columnClasses="menu, alineadoSuperior, alineadoSuperior" style="width: 100%">
                        <h:panelGrid id="panelMenu" columns="1">
                            <p:tree id="treeMenu" value="#{programaController.rootMenu}" var="node"
                                    selectionMode="single"
                                    selection="#{programaController.selectedNode}"
                                    style="width: 220px"
                                    >
                                <p:ajax event="select" listener="#{programaController.onNodeMenuSelect}" update=":formPrincipal:panelMenu, :formPrincipal:panelCentral"
                                        onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                <p:ajax event="expand" listener="#{programaController.onNodeExpand}" update=":formPrincipal:panelMenu"/>
                                <p:ajax event="collapse" listener="#{programaController.onNodeCollapse}" update=":formPrincipal:panelMenu"/>

                                <p:treeNode styleClass="menuOpciones">
                                    <h:outputText value="#{node.nombre}" title="#{node.nombre}" style="white-space: pre-line" />
                                </p:treeNode>
                            </p:tree>

                        </h:panelGrid>

                        <p:panel id="panelCentral" style="width: 98%; border: hidden ">

                            <!--tab1: Datos Generales-->
                            <p:panel id="panel1" rendered="#{programaController.selectedNodeCode=='1.1.1'}" style="border: hidden; padding-left: 20px">
                                <p:focus context="panel1"/>
                                <h:panelGrid columns="3" cellpadding="7">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{programaController.seleccionarEdicion}"
                                                     rendered="#{!programaController.modoEdicion}"
                                                     disabled="#{!programaController.permitirEdicionPerfilDatosGenerales}"
                                                     update=":formPrincipal:panel1" >
                                    </p:commandButton>                                    
                                    <p:commandButton value="Eliminar" icon="ui-icon-closethick" style="margin: 0; font-size: 11px; float: left" disabled="#{programaController.programaSelected.id==null}"
                                                     rendered="#{programaController.permitirEliminarPrograma}"
                                                     title="Eliminar Programa" update=":formPrincipal:h1,:formPrincipal:panelCentral,:formPrincipal:pInput1"
                                                     onclick="PF('dialogDeletePrograma').show();" process="@this"
                                                     >
                                    </p:commandButton>   
                                    <h:commandLink  target="_blank" actionListener="#{programaController.generarReportePerfilPDF()}"
                                                    title="Exportar a PDF" rendered="#{programaController.programaSelected.id!=null}">
                                        <p:graphicImage url="../../resources/images/pdf.png"/>
                                    </h:commandLink>                                     
                                    <p:commandButton rendered="false" value="Imprimir" icon="ui-icon-print" style="margin: 0; font-size: 11px; float: left" disabled="#{programaController.programaSelected.id==null}"
                                                     title="Imprimir Programa" update=":formPrincipal:h1,:formPrincipal:panelCentral,:formPrincipal:pInput1"
                                                     process="@this"
                                                     >
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:fieldset legend="DATOS GENERALES" style="width:100%">

                                    <h:panelGrid columns="3" cellpadding="0" cellspacing="0" style="margin-bottom: 30px">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                                            <h:panelGrid columns="3" cellpadding="7" id="h1">
                                                <p:commandButton id="btnGrabarP1" value="Grabar" icon="ui-icon-locked" style="margin: 0; font-size: 11px; float: left" 
                                                                 rendered="#{programaController.modoEdicion}"
                                                                 title="Graba Información" update=":formPrincipal:panelMenu, :formPrincipal:panelCentral, :formPrincipal:message1" 
                                                                 action="#{programaController.grabarPerfil()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panel1" 
                                                                 rendered="#{programaController.modoEdicion and programaController.programaSelected.id!=null}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                 action="#{programaController.cancelarPerfil}">
                                                </p:commandButton>


                                            </h:panelGrid>                                            
                                            <h:panelGrid columns="3" cellpadding="2"  id="pInput1"  >
                                                <p:outputLabel for="nombProg" value="* Nombre:" style="font-weight: bold"/>
                                                <p:inputTextarea id="nombProg" value="#{programaController.programaSelected.nombre}"  maxlength="500" rows="2" cols="65" required="#{not empty param['formPrincipal:btnGrabarP1']}" disabled="#{!programaController.modoEdicion}">
                                                </p:inputTextarea>
                                                <p:message for="nombProg"></p:message>

                                                <p:outputLabel value="* Campus:" style="font-weight: bold"/>
                                                <p:outputLabel id="lblCampusPrograma" value="#{programaController.programaSelected.campus.stvcampDesc}"/>                                                
                                                <p:spacer/>

                                                <p:outputLabel value="* Departamento:" style="font-weight: bold"/>
                                                <p:outputLabel id="lblDepartamentoPrograma" value="#{programaController.programaSelected.departamento.stvsubjDesc}"/>
                                                <p:spacer/>
                                            </h:panelGrid>


                                            <p:spacer height="10" width="1"></p:spacer>


                                            <p:outputLabel value="PLAZO DE EJECUCIÓN" style="font-size: 14px; font-weight: bold"/>
                                            <h:panelGrid  columns="3" cellpadding="2" >
                                                <p:outputLabel for="fechInicio" value="* Fecha de Inicio (dd/mm/aaaa):" style="font-weight: bold"/>
                                                <p:calendar id="fechInicio" navigator="true" value="#{programaController.programaSelected.fechaInicio}" yearRange="2013:2030" size="10" style="font-size: 11px" locale="es" pattern="dd/MM/yyyy" required="#{not empty param['formPrincipal:btnGrabarP1']}" disabled="#{!programaController.modoEdicion}">
                                                    <p:ajax event="dateSelect" listener="#{programaController.calculaDuracion}" update=":formPrincipal:dur" />
                                                </p:calendar>
                                                <p:message for="fechInicio"></p:message>

                                                <p:outputLabel for="fechFin" value="* Fecha de Finalización (dd/mm/aaaa):" style="font-weight: bold"/>
                                                <p:calendar id="fechFin" navigator="true" value="#{programaController.programaSelected.fechaFin}" yearRange="2015:2030" size="10" style="font-size: 11px" locale="es" pattern="dd/MM/yyyy" required="#{not empty param['formPrincipal:btnGrabarP1']}" disabled="#{!programaController.modoEdicion}">
                                                    <p:ajax event="dateSelect" listener="#{programaController.calculaDuracion}" update=":formPrincipal:dur" />
                                                </p:calendar>
                                                <p:message for="fechFin"></p:message>

                                                <p:outputLabel for="dur" value="Duración:" style="font-weight: bold"/>
                                                <p:outputLabel id="dur" value="#{programaController.programaSelected.duracion}"/>                 

                                            </h:panelGrid>
                                        </h:panelGrid>
                                        <p:spacer height="1" width="25"></p:spacer>

                                        <h:panelGrid columns="1">

                                            <h:panelGrid columns="2">
                                                <p:outputLabel value="* DATOS DEL DIRECTOR" style="font-size: 14px; font-weight: bold"/>
                                                <p:message for="lblNombreDirector"></p:message> 
                                            </h:panelGrid>
                                            <h:panelGrid columns="1" rendered="#{programaController.modoEdicion}"> 
                                                <p:outputLabel value="(Ingrese apellidos y nombres a buscar)" style="font-weight: bold"/>
                                                <p:autoComplete minQueryLength="3" value="#{programaController.nomDocenteBusqueda}" completeMethod="#{programaController.completeText}" size="70" disabled="#{!programaController.modoEdicion}">
                                                    <p:ajax event="itemSelect" listener="#{programaController.onItemSelect}"  update=":formPrincipal:btnGrabarP1, :formPrincipal:datosResp, :formPrincipal:lblCampusPrograma, :formPrincipal:lblDepartamentoPrograma"/>
                                                </p:autoComplete>
                                            </h:panelGrid>
                                            <h:panelGrid id="datosResp"  columns="3" cellpadding="2" > 
                                                <p:outputLabel value="Cédula:" for="lblCedulaDirector" style="font-weight: bold"/>
                                                <p:outputLabel id="lblCedulaDirector" value="#{programaController.docenteSelected.usuario.usuCc}" style="width:300px;"/>
                                                <p:message for="lblCedulaDirector"></p:message>


                                                <p:outputLabel value="Nombres:" style="font-weight: bold"/>
                                                <p:outputLabel id="lblNombreDirector" value="#{programaController.docenteSelected.usuario.usuNombres}" style="width:300px;"/>
                                                <p:message for="lblCargoDirector"></p:message>

                                                <p:outputLabel value="Apellidos:" style="font-weight: bold"/>
                                                <p:outputLabel id="lblApellidosDirector" value="#{programaController.docenteSelected.usuario.usuApellidos}" style="width:300px; font: xx-small;"/>
                                                <p:message for="lblApellidosDirector"></p:message>

                                                <p:outputLabel value="Cargo:" style="font-weight: bold"/>
                                                <p:outputLabel id="lblCargoDirector" value="#{programaController.docenteSelected.cargo}" style="width:300px; font: xx-small; "/>
                                                <p:message for="lblCargoDirector"></p:message>

                                                <p:outputLabel for="txtMailDirector" value="Correo Electrónico:" style="font-weight: bold"/>
                                                <p:inputText id="txtMailDirector" value="#{programaController.docenteSelected.usuario.usuEmail}" maxlength="50" style="width: 260px" required="#{not empty param['formPrincipal:btnGrabarP1']}"
                                                             disabled="#{!programaController.modoEdicion}">  
                                                </p:inputText>
                                                <p:message for="txtMailDirector" showDetail="true"></p:message>

                                                <p:outputLabel for="txtTelfDirector" value="Teléfono:" style="font-weight: bold"/> 
                                                <p:inputText id="txtTelfDirector" value="#{programaController.docenteSelected.usuario.usuTelefonoFijo}" maxlength="10" autocomplete="off" style="width: 80px" disabled="#{!programaController.modoEdicion}" required="#{not empty param['formPrincipal:btnGrabarP1']}">
                                                </p:inputText>
                                                <p:message for="txtTelfDirector"></p:message>
                                            </h:panelGrid> 
                                        </h:panelGrid>



                                    </h:panelGrid>
                                </p:fieldset>

                            </p:panel>


                            <!--panelFinalizarPerfil-->
                            <p:panel id="panelFinalizarPerfil" rendered="#{programaController.selectedNodeCode=='1.8'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarPerfil" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE REGISTRO DE PERFIL">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{(programaController.programaSelected.estado=='CRE' || programaController.programaSelected.estado=='REV')?'Una vez finalizado el proceso, no se podrá modificar la información registrada del perfil de programa...':'Proceso de ingreso de perfil Finalizado.'}" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>
                                            <p:outputLabel value="- Debe especificar la cobertura y localización (punto 1.3)" style="color:red"
                                                           rendered="#{programaController.msgCoberturaLocalizacion}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo del Plan Nacional del Buen Vivir (punto 2.1)" style="color:red"
                                                           rendered="#{programaController.msgObjetivosPLNBV}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo provincial, cantonal o parroquial (punto 2.2)" style="color:red"
                                                           rendered="#{programaController.msgObjetivosProvCanParr}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo estratégico institucional (punto 2.3)" style="color:red"
                                                           rendered="#{programaController.msgObjetivosEstraInst}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo del plan de vinculación (punto 2.4)" style="color:red"
                                                           rendered="#{programaController.msgObjetivosPlanVinculacion}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos una estrategia del plan de vinculación (punto 2.5)" style="color:red"
                                                           rendered="#{programaController.msgEstrategiasPlanVinculacion}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar el resumen del programa (punto 2.6)" style="color:red"
                                                           rendered="#{programaController.msgResumen}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar el diagnóstico y problema (punto 3.1)" style="color:red"
                                                           rendered="#{programaController.msgDiagnosticoProblemas}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un departamento participante (punto 3.3)" style="color:red"
                                                           rendered="#{programaController.msgDepartamentosParticipantes}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos una carrera participante (punto 3.4)" style="color:red"
                                                           rendered="#{programaController.msgCarrerasParticipantes}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar la información del Fin de la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{programaController.msgMatrizMarcoLogicoFin}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar la información del Objetivo General de la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{programaController.msgMatrizMarcoLogicoProposito}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar al menos un componente (objetivo específico) en la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{programaController.msgMatrizMarcoLogicoComponente}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar las estrategias para la ejecución del programa (punto 5)" style="color:red"
                                                           rendered="#{programaController.msgEstrategiaEjecucion}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar la viabilidad y plan de sostenibilidad (punto 6)" style="color:red"
                                                           rendered="#{programaController.msgViabilidad}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un proyecto planificado (punto 7)" style="color:red"
                                                           rendered="#{programaController.msgProyectosPlanificados}"></p:outputLabel>

                                            <p:commandButton id="btnFinalizarPerfil" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{!programaController.permitirEdicionPerfil}"
                                                             update=":formPrincipal:panelMenu, :formPrincipal:panelCentral, :formPrincipal:panelTitulo,   :formPrincipal:message1"
                                                             action ="#{programaController.finalizarPerfil}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el ingreso de perfil del proyecto?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>                                       

                            <!--tab2: Entidad Ejecutora-->
                            <p:panel id="panel2" rendered="#{programaController.selectedNodeCode=='1.1.2'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid id="h2" columns="1">
                                    <p:commandButton id="btnAgregarP2" value="Agregar" title="Agregar Información" icon="ui-icon-plus"
                                                     rendered="#{!programaController.controlGrabarP2}"
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     update=":formPrincipal:p2,:formPrincipal:h2" 
                                                     action="#{programaController.agregarP2()}" 
                                                     >
                                    </p:commandButton>

                                </h:panelGrid>
                                <p:panel id="p2" visible="#{programaController.controlGrabarP2}" style="padding-left: 30px; border: hidden; ">
                                    <h:panelGrid columns="2" cellspacing="0" cellpadding="0" style="margin-bottom: 10px">
                                        <p:commandButton id="btnGrabarP2" value="Grabar" title="Graba Información" icon="ui-icon-locked"  
                                                         action="#{programaController.registraP2()}" 
                                                         update=":formPrincipal:p2,:formPrincipal:h2,:formPrincipal:dataTableProgVin, :formPrincipal:message1"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP2" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" process="@this" 
                                                         update=":formPrincipal:p2,:formPrincipal:h2" 
                                                         action="#{programaController.cancelarP2}">
                                        </p:commandButton>
                                    </h:panelGrid>                         
                                    <h:panelGrid columns="2" cellspacing="0">
                                        <p:outputLabel for="txtNomUnidadEjecutora" value="* Nombre:" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:inputText id="txtNomUnidadEjecutora" value="#{programaController.entidadEjecutoraSelected.sopinNombre}" required="#{not empty param['formPrincipal:btnGrabarP2']}" style="width: 300px" maxlength="100"></p:inputText>  
                                            <p:message for="txtNomUnidadEjecutora"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel for="selProvUnidadEjecutora" value="* Provincia:" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:selectOneMenu id="selProvUnidadEjecutora" value="#{programaController.codProvinciaSelected}" style="width:292px;" required="#{not empty param['formPrincipal:btnGrabarP2']}">
                                                <f:selectItem itemLabel="[[-Seleccione un item-]]" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItems value="#{programaController.provinciaList}" var="provin" itemLabel="#{provin.proNombre}" itemValue="#{provin.proId}"/>
                                            </p:selectOneMenu>
                                            <p:message for="selProvUnidadEjecutora"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel for="txtCiudadUnidadEjecutora" value="* Ciudad:" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:inputText id="txtCiudadUnidadEjecutora" value="#{programaController.entidadEjecutoraSelected.sopinCiudad}" required="#{not empty param['formPrincipal:btnGrabarP2']}" maxlength="25"></p:inputText>
                                            <p:message for="txtCiudadUnidadEjecutora"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel for="txtDirUnidadEjecutora" value="* Dirección:" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:inputText id="txtDirUnidadEjecutora" value="#{programaController.entidadEjecutoraSelected.sopinDireccion}" required="#{not empty param['formPrincipal:btnGrabarP2']}" style="width: 300px" maxlength="100"></p:inputText>
                                            <p:message for="txtDirUnidadEjecutora"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel for="txtTelefUnidadEjecutora" value="* Teléfono:" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:inputText id="txtTelefUnidadEjecutora" value="#{programaController.entidadEjecutoraSelected.sopinTelefono}" 
                                                         maxlength="15"
                                                         required="#{not empty param['formPrincipal:btnGrabarP2']}"
                                                         >
                                                <pe:keyFilter regEx="/[0-9_)(-]/i"/>  
                                            </p:inputText>
                                            <p:message for="txtTelefUnidadEjecutora"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel for="txtPagWebUnidadEjecutora" value="Página Web:" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:inputText id="txtPagWebUnidadEjecutora" value="#{programaController.entidadEjecutoraSelected.sopinPaguinaWeb}" style="width: 200px" maxlength="25"></p:inputText>
                                            <p:message for="txtPagWebUnidadEjecutora"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                </p:panel>
                                <h:outputLabel value="Entidad ejecutora:" style="font-weight: bold"/>
                                <p:dataTable id="dataTableProgVin" value="#{programaController.entidadEjecutoraList}" var="progVin"
                                             style="width: 99%; padding-top: 5px" paginator="true" rows="10" rowIndexVar="index"  resizableColumns="true" 
                                             emptyMessage="No se encontraron resultados">
                                    <p:column headerText="Nro." style="width:20px">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Nombre" style="white-space:pre-line" >
                                        <h:outputText value="#{progVin.sopinNombre}" style="white-space: pre-line; "/>
                                    </p:column>
                                    <p:column headerText="Provincia" style="width:100px">
                                        <h:outputText value="#{progVin.proId.proNombre}" style="white-space: pre-line; width: 100%"/>
                                    </p:column>
                                    <p:column headerText="Ciudad" style="width: 100px;white-space:pre-line" >
                                        <h:outputText value="#{progVin.sopinCiudad}" style="white-space: pre-line; width: 100%"/>
                                    </p:column> 
                                    <p:column headerText="Dirección" style="width: 100px;white-space:pre-line" >                               
                                        <h:outputText value="#{progVin.sopinDireccion}" style="white-space: pre-line; width: 100%"/>
                                    </p:column>
                                    <p:column headerText="Teléfono" style="width: 80px;white-space:pre-line" >
                                        <h:outputText value="#{progVin.sopinTelefono}" style="white-space: pre-line; "/>
                                    </p:column>     
                                    <p:column headerText="Página Web" style="width: 100px;white-space:pre-line" >
                                        <h:outputText value="#{progVin.sopinPaguinaWeb}" style="white-space: pre-line; width: 100%"/>
                                    </p:column>                           
                                    <p:column headerText="Editar" style="width: 40px; text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro" 
                                                         update=":formPrincipal:p2,:formPrincipal:h2" 
                                                         action="#{programaController.seleccionarP2}"
                                                         disabled="#{!programaController.permitirEdicionPerfil}"
                                                         oncomplete="document.getElementById('formPrincipal:txtNomUnidadEjecutora').focus();">
                                            <f:setPropertyActionListener value="#{progVin}" target="#{programaController.entidadEjecutoraSelected}"/>                                            
                                        </p:commandButton>
                                    </p:column>
                                    <p:column headerText="Eliminar" style="width: 40px;text-align: center">
                                        <p:commandButton id="btnEliminarP2" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         disabled="#{!programaController.permitirEdicionPerfil}"
                                                         onclick="PF('dialogDeleteEntidadEjecutora').show();" process="@this">
                                            <f:setPropertyActionListener value="#{progVin}" target="#{programaController.entidadEjecutoraSelected}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>                                                
                            </p:panel>

                            <!--tab3: Cobertura y Localización-->
                            <p:panel id="panel3" rendered="#{programaController.selectedNodeCode=='1.1.3'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid columns="1" id="h3" rendered="#{!programaController.controlGrabar}">
                                    <p:commandButton id="btnEditarP3" value="Editar" title="Editar Información" icon="ui-icon-pencil" 
                                                     update=":formPrincipal:panel3" 
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                     action="#{programaController.editarP3()}" 
                                                     >
                                    </p:commandButton>
                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="* Cobertura:" for="selCobertura" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:selectOneRadio id="selCobertura" value="#{programaController.cobertura}" 
                                                              required="#{not empty param['formPrincipal:btnGrabarP1']}"
                                                              disabled="#{!programaController.modoEdicion}"
                                                              style="font-weight: normal"
                                                              >
                                                <f:selectItem itemLabel="Nacional" itemValue="1"/>
                                                <f:selectItem itemLabel="Provincial" itemValue="2"/>
                                                <f:selectItem itemLabel="Cantonal" itemValue="3"/>
                                                <f:selectItem itemLabel="Parroquial" itemValue="4"/>
                                                <p:ajax listener="#{programaController.seleccionarCobertura}"
                                                        update=":formPrincipal:vinPCobertura" process=":formPrincipal:vinPCobertura" onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                            </p:selectOneRadio>
                                            <p:message for="selCobertura"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>

                                    <h:outputLabel value="Cobertura y localización:" style="font-weight: bold" rendered="#{programaController.cobertura!=1}"/>
                                    <p:dataTable id="dataTableCobertura" value="#{programaController.programaSelected.parroquiasCobertura}" var="parroquiaCobertura"
                                                 style="width: 100%" paginator="true" rows="10" rowIndexVar="index"  resizableColumns="true" 
                                                 emptyMessage="No se encontraron resultados"
                                                 rendered="#{programaController.cobertura!=1}">

                                        <p:column headerText="Nro." style="width:20px">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Provincia" style="width: 250px;white-space:pre-line" sortBy="#{parroquiaCobertura.nomProvincia}">
                                            <h:outputText value="#{parroquiaCobertura.nomProvincia}" style="white-space: pre-line; width: 100%"/>
                                        </p:column>
                                        <p:column headerText="Cantón" style="width: 250px;white-space:pre-line" sortBy="#{parroquiaCobertura.nomCanton}"
                                                  rendered="#{programaController.cobertura==3 or programaController.cobertura==4}">
                                            <h:outputText value="#{parroquiaCobertura.nomCanton}" style="white-space: pre-line; width: 100%"/>
                                        </p:column>
                                        <p:column headerText="Parroquia" style="white-space:pre-line" sortBy="#{parroquiaCobertura.nomParroquia}"
                                                  rendered="#{programaController.cobertura==4}">
                                            <h:outputText value="#{parroquiaCobertura.nomParroquia}" style="white-space: pre-line; width: 100%"/>
                                        </p:column>
                                    </p:dataTable>                                             

                                </h:panelGrid>
                                <p:panel id="p3" visible="#{programaController.controlGrabar}" style="border: hidden; ">
                                    <h:panelGrid columns="2" cellpadding="5">
                                        <p:commandButton id="btnGrabarP3" value="Grabar" icon="ui-icon-locked" style="margin: 0; font-size: 11px; float: left " 
                                                         title="Graba Información" action="#{programaController.registraP3()}"
                                                         update=":formPrincipal:panel3, :formPrincipal:message1"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP3" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" style="margin: 0; font-size: 11px; float: left "
                                                         title="Cancela Información" 
                                                         update=":formPrincipal:panel3" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{programaController.cancelarP3}">
                                        </p:commandButton>

                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="* Cobertura:" for="selCobertura2" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:selectOneRadio id="selCobertura2" value="#{programaController.cobertura}" 
                                                              required="#{not empty param['formPrincipal:btnGrabarP1']}"
                                                              style="font-weight: normal"
                                                              >
                                                <f:selectItem itemLabel="Nacional" itemValue="1"/>
                                                <f:selectItem itemLabel="Provincial" itemValue="2"/>
                                                <f:selectItem itemLabel="Cantonal" itemValue="3"/>
                                                <f:selectItem itemLabel="Parroquial" itemValue="4"/>
                                                <p:ajax listener="#{programaController.seleccionarCobertura}"
                                                        update=":formPrincipal:vinPCobertura" onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                            </p:selectOneRadio>
                                            <p:message for="selCobertura2"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                    <p:panel id="vinPCobertura" style="font-size: 11px; text-align: left; border: hidden;">
                                        <p:tree id="treeLocalizacion" value="#{programaController.root3}" var="doc"
                                                selectionMode="checkbox"
                                                selection="#{programaController.selectedNodes2}">
                                            <p:ajax event="select" update=":formPrincipal:h3" listener="#{programaController.validarVaciosP3()}" />
                                            <p:ajax event="unselect" update=":formPrincipal:h3" listener="#{programaController.validarVaciosP3()}"/>
                                            <p:treeNode>
                                                <h:outputText value="#{doc.nombre}"/>
                                            </p:treeNode>
                                            <p:treeNode>
                                                <h:outputText value="#{doc.nombre}" />
                                            </p:treeNode>
                                        </p:tree>
                                    </p:panel>
                                </p:panel>
                            </p:panel>



                            <!--tab4: Objetivos PLNBV-->
                            <p:panel id="panel4" rendered="#{programaController.selectedNodeCode=='1.2.1'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid columns="1" cellspacing="0" cellpadding="5" id="h4">
                                    <p:commandButton id="btnAgregarP4" value="Agregar" icon="ui-icon-plus" style="margin: 0; font-size: 11px; float: left"
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     title="Agregar Información" update=":formPrincipal:h4, :formPrincipal:p4" action="#{programaController.agregarP4()}" rendered="#{!programaController.controlGrabarP4}">
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p4" visible="#{programaController.controlGrabarP4}" style="padding-left: 30px; border: hidden; ">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP4" value="Grabar" icon="ui-icon-locked" style="margin: 0; font-size: 11px; float: left" 
                                                         title="Graba Información" update=":formPrincipal:h4,:formPrincipal:p4,:formPrincipal:dataTableObjPlan, :formPrincipal:message1" action="#{programaController.registraP4()}" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP4" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" style="margin: 0; font-size: 11px; float: left "
                                                         title="Cancela Información" update=":formPrincipal:p4,:formPrincipal:h4" action="#{programaController.cancelarP4}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="2" cellpadding="5">                                                        
                                        <p:outputLabel for="objPlan" value="* Seleccione el Objetivo del Plan Nacional del Buen Vivir" style="font-weight: bold"/>
                                        <p:spacer width="1" height="1"></p:spacer>
                                        <p:selectOneMenu id="objPlan" value="#{programaController.objBVivirPadre.svobviId}" required="#{not empty param['formPrincipal:btnGrabarP4']}" style="width:460px; font: xx-small">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.objBVivirPadreList}" var="objPadre" itemLabel="#{objPadre.ordenDescripcion}" itemValue="#{objPadre.svobviId}"/>
                                            <p:ajax event="change" update=":formPrincipal:subojPlan1, :formPrincipal:btnGrabarP4" listener="#{programaController.bsqSubObjetivos()}"/>
                                        </p:selectOneMenu>
                                        <p:message for="objPlan"></p:message>

                                        <p:outputLabel for="subojPlan1" value="* Seleccione la Política a agregar" style="font-weight: bold"/>
                                        <p:spacer width="1" height="1"></p:spacer>
                                        <p:selectOneMenu id="subojPlan1" value="#{programaController.objBVivirHijo.svobviId}" required="#{not empty param['formPrincipal:btnGrabarP4']}" style="width:460px; font: xx-small">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.objBVivirHijoList}" var="subObj" itemLabel="#{subObj.ordenDescripcion}" itemValue="#{subObj.svobviId}"/>
                                        </p:selectOneMenu>
                                        <p:message for="subojPlan1"></p:message>
                                    </h:panelGrid>                             
                                </p:panel>                        

                                <h:outputLabel value="¿A qué objetivos del Plan Nacional del Buen Vivir apunta el Programa?" style="font-weight: bold"/>
                                <p:dataTable style="width: 99%" id="dataTableObjPlan" value="#{programaController.proObjList}" var="proObjPlan" paginator="true"
                                             expandedRow="true" rows="10" rowIndexVar="index" resizableColumns="true" emptyMessage="No se encontraron resultados" >
                                    <p:ajax event="rowToggle" listener="#{programaController.onRowToggleLine}"/>

                                    <p:column style="width: 20px">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Nro." style="width: 20px; ">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Objetivos del Plan Nacional del Buen Vivir" >
                                        <h:outputText value="#{proObjPlan.objetivoBVivir.ordenDescripcion}" style="white-space: pre-line"/>
                                    </p:column>

                                    <p:rowExpansion >
                                        <p:panelGrid columns="1" style="border:hidden;margin:0 auto;width:95%; text-align: left"  >
                                            <p:dataTable id="dtSubObj" value="#{proObjPlan.svinProgObjHijos}" var="subObjl"
                                                         rendered="#{not empty proObjPlan.svinProgObjHijos}"
                                                         rowIndexVar="index" style="width: 95%">
                                                <p:column headerText="Nro." style="width:20px">
                                                    <h:outputText value="#{index + 1}" />
                                                </p:column>
                                                <p:column headerText="Políticas">
                                                    <h:outputText value="#{subObjl.objetivoBVivir.ordenDescripcion}" style="white-space: pre-line;width: 250px"/>                                                    
                                                </p:column>

                                                <p:column headerText="Eliminar " style="width: 50px; text-align: center" >
                                                    <p:commandButton id="btnEliminarP4" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                                     onclick="PF('dialogDeleteObjetivosPlanBVivir').show();" disabled="#{!programaController.permitirEdicionPerfil}">
                                                        <f:setPropertyActionListener value="#{subObjl}" target="#{programaController.svinProgObjSelected}" />
                                                    </p:commandButton>   
                                                </p:column>
                                            </p:dataTable>
                                        </p:panelGrid>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>



                            <!--panelIndicadorEstrategia: Alineamiento del Proyecto-Objetivos Estratégicos Institucionales-->
                            <p:panel id="panelIndicadorEstrategia" rendered="#{programaController.selectedNodeCode=='1.2.2'}" style="border: hidden; padding-left: 20px;">

                                <h:panelGrid id="panelEdicionIndicadorEstrategia" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="2" rendered="#{programaController.indicadorEstrategiaProyectoSelected==null}">
                                        <p:commandButton value="Agregar Indicador" title="Agregar Indicador" icon="ui-icon-plus" 
                                                         disabled="#{!programaController.permitirEdicionPerfil}"
                                                         update=":formPrincipal:panelEdicionIndicadorEstrategia"
                                                         actionListener="#{programaController.nuevoIndicador}" 
                                                         >
                                        </p:commandButton>
                                        <p:commandButton value="Agregar Estrategia" title="Agregar Estrategia" icon="ui-icon-plus" 
                                                         disabled="#{!programaController.permitirEdicionPerfil}"
                                                         update=":formPrincipal:panelEdicionIndicadorEstrategia"
                                                         actionListener="#{programaController.nuevoEstrategia}" 
                                                         >
                                        </p:commandButton>

                                    </h:panelGrid>                                    
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{programaController.indicadorEstrategiaProyectoSelected !=null}">
                                        <p:fieldset legend="#{programaController.indicadorEstrategiaProyectoSelected.id==null ? (programaController.tipoObjetivoEstrategico ==3?'NUEVO INDICADOR':'NUEVA ESTRATEGIA'):'EDICION DE INDICADOR-ESTRATEGIA'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarIndicadorEstrategiaProyecto" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelIndicadorEstrategia, :formPrincipal:message1" 
                                                                 action ="#{programaController.grabarIndicadorEstrategia()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelIndicadorEstrategia" 
                                                                 action="#{programaController.cancelarIndicadorEstrategia()}">
                                                </p:commandButton>

                                            </h:panelGrid>



                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="selPerspectivaIndicadorEstrategia" value="Perspectiva:" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selPerspectivaIndicadorEstrategia" value="#{programaController.perspectivaSelected}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarIndicadorEstrategiaProyecto']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{programaController.perspectivasList}" var="perspectiva" itemLabel="#{perspectiva.descripcion}" itemValue="#{perspectiva}"/>
                                                        <p:ajax event="change"
                                                                update=":formPrincipal:selObjetivoIndicadorEstrategia" 
                                                                />
                                                    </p:selectOneMenu>
                                                    <p:message for="selPerspectivaIndicadorEstrategia"></p:message>


                                                </h:panelGrid>


                                                <p:outputLabel for="selObjetivoIndicadorEstrategia" value="Objetivo:" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selObjetivoIndicadorEstrategia" value="#{programaController.objetivoEstrategicoSelected}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarIndicadorEstrategiaProyecto']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{programaController.perspectivaSelected.objetivoEstrategicoHijoList}" var="objetivoEstrategico" itemLabel="#{objetivoEstrategico.descripcion}" itemValue="#{objetivoEstrategico}"/>
                                                        <p:ajax event="change" 
                                                                update=":formPrincipal:selIndicadorEstrategia" 
                                                                />
                                                    </p:selectOneMenu> 
                                                    <p:message for="selObjetivoIndicadorEstrategia"></p:message>                                                

                                                </h:panelGrid>

                                                <p:outputLabel for="selIndicadorEstrategia" value="#{programaController.tipoObjetivoEstrategico==3?'Indicador:':'Estrategia:'}" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">

                                                    <p:selectOneMenu id="selIndicadorEstrategia" value="#{programaController.indicadorEstrategiaProyectoSelected.objetivoEstrategico}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarIndicadorEstrategiaProyecto']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{programaController.tipoObjetivoEstrategico==3?programaController.objetivoEstrategicoSelected.indicadorList:programaController.objetivoEstrategicoSelected.estrategiaList}" var="indicadorEstrategia" itemLabel="#{indicadorEstrategia.descripcion}" itemValue="#{indicadorEstrategia}"/>
                                                    </p:selectOneMenu>
                                                    <p:message for="selIndicadorEstrategia"></p:message>                                                

                                                </h:panelGrid>

                                            </h:panelGrid>                                            
                                        </p:fieldset>

                                    </h:panelGrid>                                    
                                </h:panelGrid>
                                <h:outputLabel value="¿A qué objetivos Estratégicos Institucionales apunta el Proyecto?:" style="font-weight: bold"/>
                                <p:dataTable value="#{programaController.programaSelected.perspectivaList}" var="perspectivaProyecto"
                                             editable="true" rowIndexVar="index"  resizableColumns="true" expandedRow="true"
                                             emptyMessage="No se encontraron resultados" style="width: 99%">
                                    <p:column style="width: 20px">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Nro." style="width:20px">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Perspectiva" style="white-space:pre-line">
                                        <h:outputText value="#{perspectivaProyecto.descripcion}" style="white-space: pre-line; "/>
                                    </p:column>
                                    <p:rowExpansion >
                                        <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                            <h:outputLabel value="Objetivos:" style="font-weight: bold"/>
                                            <p:dataTable value="#{perspectivaProyecto.objetivoEstrategicoHijoList}" var="objetivoProyeto"
                                                         rendered="#{not empty perspectivaProyecto.objetivoEstrategicoHijoList}" expandedRow="true" 
                                                         rowIndexVar="index" style="width: 98%">
                                                <p:column style="width: 20px">
                                                    <p:rowToggler/>
                                                </p:column>
                                                <p:column headerText="Nro." style="width:20px">
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Objetivo" style="white-space:pre-line">
                                                    <h:outputText value="#{objetivoProyeto.descripcion}" style="white-space: pre-line; "/>
                                                </p:column>
                                                <p:rowExpansion >
                                                    <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                                        <h:outputLabel rendered="#{not empty objetivoProyeto.indicadorList}" value="Indicadores:" style="font-weight: bold"/>
                                                        <p:dataTable value="#{objetivoProyeto.indicadorList}" var="indicadorProyeto"
                                                                     rendered="#{not empty objetivoProyeto.indicadorList}"
                                                                     rowIndexVar="index" style="width: 98%">
                                                            <p:column headerText="Nro." style="width:20px">
                                                                <h:outputText value="#{index + 1}"/>
                                                            </p:column>
                                                            <p:column headerText="Indicador" style="white-space:pre-line">
                                                                <h:outputText value="#{indicadorProyeto.descripcion}" style="white-space: pre-line; "/>
                                                            </p:column>
                                                            <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                                                <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                                 disabled="#{!programaController.permitirEdicionPerfil}"
                                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                                 action="#{programaController.eliminarIndicadorEstrategia}"
                                                                                 update=":formPrincipal:panelIndicadorEstrategia, :formPrincipal:message1 ">
                                                                    <f:setPropertyActionListener value="#{indicadorProyeto}" target="#{programaController.objetivoEstrategicoSelected}" />
                                                                    <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                                </p:commandButton>  
                                                            </p:column>                                                


                                                        </p:dataTable>

                                                        <h:outputLabel rendered="#{not empty objetivoProyeto.estrategiaList}" value="Estrategias:" style="font-weight: bold"/>
                                                        <p:dataTable value="#{objetivoProyeto.estrategiaList}" var="estrategiaProyeto"
                                                                     rendered="#{not empty objetivoProyeto.estrategiaList}"
                                                                     rowIndexVar="index" style="width: 98%">
                                                            <p:column headerText="Nro." style="width:20px">
                                                                <h:outputText value="#{index + 1}"/>
                                                            </p:column>
                                                            <p:column headerText="Estrategia" style="white-space:pre-line">
                                                                <h:outputText value="#{estrategiaProyeto.descripcion}" style="white-space: pre-line; "/>
                                                            </p:column>
                                                            <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                                                <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                                 disabled="#{!programaController.permitirEdicionPerfil}"
                                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                                 action="#{programaController.eliminarIndicadorEstrategia}"
                                                                                 update=":formPrincipal:panelIndicadorEstrategia, :formPrincipal:message1 ">
                                                                    <f:setPropertyActionListener value="#{estrategiaProyeto}" target="#{programaController.objetivoEstrategicoSelected}" />
                                                                    <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                                </p:commandButton>  
                                                            </p:column>                                                


                                                        </p:dataTable>

                                                    </p:panel>
                                                </p:rowExpansion>                                                    

                                            </p:dataTable>
                                        </p:panel>
                                    </p:rowExpansion>

                                </p:dataTable>                      
                            </p:panel>  

                            <!--tab6: Objetivos del plan de vinculación-->
                            <p:panel id="panel6" rendered="#{programaController.selectedNodeCode=='1.2.3'}" style="border: hidden; padding-left: 20px"> 
                                <h:panelGrid columns="1" cellspacing="0" cellpadding="5" id="h6">
                                    <p:commandButton id="btnAgregarP6" value="Agregar" icon="ui-icon-plus"
                                                     title="Agregar Información" update=":formPrincipal:h6, :formPrincipal:p6" action="#{programaController.agregarP6()}" rendered="#{!programaController.controlGrabarP6}" disabled="#{!programaController.permitirEdicionPerfil}">
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p6" visible="#{programaController.controlGrabarP6}" style="padding-left: 30px; border: hidden">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP6" value="Grabar" icon="ui-icon-locked" 
                                                         title="Graba Información" update=":formPrincipal:p6,:formPrincipal:h6,:formPrincipal:dataTableObjPlanVin, :formPrincipal:message1" action="#{programaController.registraP6}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP6" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" process="@this"
                                                         title="Cancela Información" update=":formPrincipal:p6,:formPrincipal:h6" action="#{programaController.cancelarP6}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="2" cellpadding="5" id="pInput6">                                                       
                                        <p:outputLabel for="objPlanVin" value="* Seleccione el objetivo del Plan de Vinculación a agregar:" style="font-weight: bold"/>
                                        <p:spacer height="1"></p:spacer>
                                        <p:selectOneMenu id="objPlanVin" value="#{programaController.planProgramaV.svopviId}" required="#{not empty param['formPrincipal:btnGrabarP6']}">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.objPlanVinculaList}" var="objPlanVinc" itemLabel="#{objPlanVinc.ordenDescripcion}" itemValue="#{objPlanVinc.svopviId}"/>
                                        </p:selectOneMenu>
                                        <p:message for="objPlanVin"></p:message>
                                    </h:panelGrid>                              
                                </p:panel>
                                <h:outputLabel value="¿A qué objetivos del Plan de Vinculación con la Sociedad apunta el Programa?" style="font-weight: bold"/>
                                <p:dataTable id="dataTableObjPlanVin" value="#{programaController.svinPlanVProgList}" var="objPlanVin" paginator="true" style="width: 99%"
                                             rows="10" rowIndexVar="index" resizableColumns="true" editable="true" emptyMessage="No se encontraron resultados" >
                                    <p:ajax event="rowEdit" listener="#{programaController.onRowEditP6}" partialSubmit="true"/>
                                    <p:ajax event="rowEditCancel" listener="#{programaController.onRowCancelP6}" partialSubmit="true"/>

                                    <p:column headerText="Nro." style="width: 20px;">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Objetivo del Plan de Vinculación" >
                                        <h:outputText value="#{objPlanVin.objetivoPlanVinculacion.ordenDescripcion}" style="white-space: pre-line"/>
                                    </p:column>
                                    <!--<p:column headerText="Editar" style="width: 5%; font-size: 11px; font-weight: bold">
                                        <p:rowEditor/>
                                    </p:column>-->
                                    <p:column headerText="Eliminar " style="width: 50px; text-align: center">
                                        <p:commandButton id="btnEliminarP6" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onclick="PF('dialogDeleteObjetivoPlanVinculacion').show();" disabled="#{!programaController.permitirEdicionPerfil}">
                                            <f:setPropertyActionListener value="#{objPlanVin}" target="#{programaController.planVProgSelected}" />
                                        </p:commandButton>   
                                    </p:column>                           
                                </p:dataTable>

                            </p:panel>

                            <!--tab7: Estrategias del plan de vinculación-->
                            <p:panel id="panel7" rendered="#{programaController.selectedNodeCode=='1.2.4'}" style="border: hidden; padding-left: 20px">  
                                <h:panelGrid columns="1" cellspacing="0" cellpadding="5" id="h7">
                                    <p:commandButton id="btnAgregarP7" value="Agregar" icon="ui-icon-plus" 
                                                     title="Agregar Información" update=":formPrincipal:h7, :formPrincipal:p7" action="#{programaController.agregarP7()}" rendered="#{!programaController.controlGrabarP7}" disabled="#{!programaController.permitirEdicionPerfil}">
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p7" visible="#{programaController.controlGrabarP7}" style="padding-left: 30px; border: hidden;">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP7" value="Grabar" icon="ui-icon-locked" 
                                                         title="Graba Información" update=":formPrincipal:h7,:formPrincipal:p7,:formPrincipal:dataTableEstPlanVin, :formPrincipal:message1" action="#{programaController.registraP7}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP7" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" process="@this"
                                                         title="Cancela Información" update=":formPrincipal:h7, :formPrincipal:p7" action="#{programaController.cancelarP7}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="2" cellpadding="5">                                                       
                                        <p:outputLabel for="estPlanVin" value="* Seleccione la Estrategia del Plan de Vinculación a agregar" style="font-weight: bold"/>
                                        <p:spacer height="1"></p:spacer>
                                        <p:selectOneMenu id="estPlanVin" value="#{programaController.estrategiaV.svevplId}" required="#{not empty param['formPrincipal:btnGrabarP7']}" style="width:460px">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.estrategiasVinculaList}" var="estPlan" itemLabel="#{estPlan.ordenDescripcion}" itemValue="#{estPlan.svevplId}"/>
                                        </p:selectOneMenu>
                                        <p:message for="estPlanVin"></p:message>
                                    </h:panelGrid>                              
                                </p:panel>
                                <h:outputLabel for="dataTableEstPlanVin" value="¿A qué estrategias del Plan de Vinculación con la Sociedad apunta el Programa?" style="font-weight: bold"/>
                                <p:dataTable id="dataTableEstPlanVin" value="#{programaController.estrategiasProgramaList}" var="estPlanVin" paginator="true" style="width: 99%"
                                             rows="10" rowIndexVar="index" resizableColumns="true" editable="true" emptyMessage="No se encontraron resultados" >
                                    <p:ajax event="rowEdit" listener="#{programaController.onRowEditP7}" partialSubmit="true"/>
                                    <p:ajax event="rowEditCancel" listener="#{programaController.onRowCancelP7}" partialSubmit="true"/>

                                    <p:column headerText="Nro." style="width: 20px;">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Estrategias del Plan" >
                                        <h:outputText value="#{estPlanVin.estrategiaPlanVinculacion.ordenDescripcion}" style="white-space: pre-line"/>
                                    </p:column>
                                    <!--<p:column headerText="Editar" style="width: 5%; font-size: 11px; font-weight: bold">
                                        <p:rowEditor/>
                                    </p:column>-->
                                    <p:column headerText="Eliminar " style="width: 50px; text-align: center">
                                        <p:commandButton id="btnEliminarP7" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onclick="PF('dialogDeleteEstrategiaPlanVinculacion').show();" disabled="#{!programaController.permitirEdicionPerfil}">
                                            <f:setPropertyActionListener value="#{estPlanVin}" target="#{programaController.estrategiaProgSelected}" />
                                        </p:commandButton>   
                                    </p:column>                           
                                </p:dataTable>                                            
                            </p:panel>

                            <!--tab16: Objetivos Provinciales, Cantonales o Paroquiales-->
                            <p:panel id="panel16" rendered="#{programaController.selectedNodeCode=='1.2.5'}" style="border: hidden; padding-left: 20px">  
                                <h:panelGrid columns="1" cellspacing="0" cellpadding="5" id="h16">
                                    <p:commandButton id="btnEditarP16" value="Editar" icon="ui-icon-pencil" style="margin: 0; font-size: 11px; float: left" 
                                                     title="Editar Información" update=":formPrincipal:h16, :formPrincipal:p16, :formPrincipal:dataTableObjParroquiales" action="#{programaController.editarP16()}" rendered="#{!programaController.controlGrabarP16}" disabled="#{!programaController.permitirEdicionPerfil}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()" >
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p16" visible="#{programaController.controlGrabarP16}" style="border: hidden;">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP16" value="Grabar" icon="ui-icon-locked" style="margin: 0; font-size: 11px; float: left " 
                                                         title="Graba Información" action="#{programaController.registraP16()}" 
                                                         update=":formPrincipal:p16,:formPrincipal:h16,:formPrincipal:message1, :formPrincipal:dataTableObjParroquiales"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP16" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" style="margin: 0; font-size: 11px; float: left "
                                                         title="Cancela Información" update=":formPrincipal:p16,:formPrincipal:h16, :formPrincipal:dataTableObjParroquiales" action="#{programaController.cancelarP16}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                </p:panel>                                  
                                <h:outputLabel for="dataTableObjParroquiales" value="Objetivos Provinciales, Cantonales y Parroquiales:" style="font-weight: bold"/>
                                <p:dataTable id="dataTableObjParroquiales" value="#{programaController.programaSelected.objetivosProvCanParrOrdenado}" var="ob"
                                             editable="true" style="width: 99%" paginator="true" rows="10" rowIndexVar="index"  resizableColumns="true" 
                                             emptyMessage="No se encontraron resultados">
                                    <p:ajax event="rowEdit" listener="#{programaController.onRowEditP16}" partialSubmit="true"/>
                                    <p:ajax event="rowEditCancel" listener="#{programaController.onRowCancelP16}" partialSubmit="true"/>

                                    <p:column headerText="Nro." style="width:20px">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Provincia" style="width: 100px;white-space:pre-line" sortBy="#{ob.nomProvincia}"
                                              rendered="#{programaController.programaSelected.cobertura!=1}">
                                        <p:cellEditor> 
                                            <f:facet name="output"><h:outputText value="#{ob.nomProvincia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                            <f:facet name="input"><h:outputText value="#{ob.nomProvincia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                        </p:cellEditor>                              
                                    </p:column>
                                    <p:column headerText="Cantón" style="width: 100px;white-space:pre-line" sortBy="#{ob.nomCanton}"
                                              rendered="#{programaController.programaSelected.cobertura==3 or programaController.programaSelected.cobertura==4}">
                                        <p:cellEditor>
                                            <f:facet name="output"><h:outputText value="#{ob.nomCanton}" style="white-space: pre-line; width: 100%"/></f:facet>
                                            <f:facet name="input"><h:outputText value="#{ob.nomCanton}" style="white-space: pre-line; width: 100%"/></f:facet>
                                        </p:cellEditor>                               
                                    </p:column>     
                                    <p:column headerText="Parroquia" style="width: 150px;white-space:pre-line" sortBy="#{ob.nomParroquia}"
                                              rendered="#{programaController.programaSelected.cobertura==4}">
                                        <p:cellEditor>
                                            <f:facet name="output"><h:outputText value="#{ob.nomParroquia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                            <f:facet name="input"><h:outputText value="#{ob.nomParroquia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                        </p:cellEditor> 
                                    </p:column>
                                    <p:column headerText="Objetivo" style="white-space:pre-line" sortBy="#{ob.objetivos}" rendered="#{!programaController.controlGrabarP16}">
                                        <h:outputText value="#{ob.objetivos}" style="white-space: pre-line; width: 100%" />
                                    </p:column>                         
                                    <p:column headerText="Objetivo" style="white-space:pre-line" sortBy="#{ob.objetivos}" rendered="#{programaController.controlGrabarP16}">
                                        <p:inputTextarea id="txtObjetivos" rows="2" style="width: 100%" value="#{ob.objetivos}" autoResize="false" maxlength="2000"></p:inputTextarea>  
                                        <p:message for="txtObjetivos"></p:message>
                                    </p:column>

                                </p:dataTable>                                 
                            </p:panel>

                            <!--tab8: Resumen del programa-->
                            <p:panel id="panel8" rendered="#{programaController.selectedNodeCode=='1.2.6'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid columns="2" cellpadding="7" id="h8">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{programaController.seleccionarEdicion}"
                                                     rendered="#{!programaController.modoEdicion}"
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     update=":formPrincipal:h8,:formPrincipal:pInput8" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP8" value="Grabar" icon="ui-icon-locked"
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Graba Información" update=":formPrincipal:h8,:formPrincipal:pInput8, :formPrincipal:message1" action="#{programaController.registraP8}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP8" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w"
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Cancela Información" update=":formPrincipal:h8,:formPrincipal:pInput8" action="#{programaController.cancelarP8}">
                                    </p:commandButton>                                     
                                </h:panelGrid>
                                <h:panelGrid columns="2" cellpadding="5" id="pInput8">
                                    <p:outputLabel for="resProg" value="* Resumen del Programa:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <pe:ckEditor id="resProg" value="#{programaController.programaSelected.resumen}" required="#{not empty param['formPrincipal:btnGrabarP8']}"
                                                 readonly="#{!programaController.modoEdicion}"
                                                 width="100%"
                                                 height="250"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>


                                    <p:message for="resProg"></p:message>
                                </h:panelGrid>                                
                            </p:panel>  


                            <!--tab9: Diagnóstico y Problemas-->
                            <p:panel id="panel9" rendered="#{programaController.selectedNodeCode=='1.3.1'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid columns="2" cellpadding="7" id="h9">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{programaController.seleccionarEdicion}"
                                                     rendered="#{!programaController.modoEdicion}"
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     update=":formPrincipal:h9,:formPrincipal:pInput9" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP9" value="Grabar" icon="ui-icon-locked"
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Graba Información" update=":formPrincipal:h9,:formPrincipal:pInput9, :formPrincipal:message1" action="#{programaController.registraPerfilPrograma}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP9" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w"
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Cancela Información" update=":formPrincipal:h9,:formPrincipal:pInput9" action="#{programaController.cancelarPerfilPrograma}">
                                    </p:commandButton> 

                                </h:panelGrid>
                                <h:panelGrid columns="2" cellpadding="2" id="pInput9">
                                    <h:panelGrid columns="2">
                                        <p:outputLabel for="geoArea" value="* Ubicación geográfica o área de intervención del programa:" style="font-weight: bold"/>
                                        <img src="#{request.contextPath}/resources/images/ayuda_rapida.png" style="visibility: hidden; width: 15px; cursor: pointer" title="Si es asi, el campus al cual pertenece el programa (seleccionado en Datos Generales) debería también poder agregarse como entidad ejecutora o validar que pueda seleccionar cualquier otra excepto esta"/>
                                    </h:panelGrid>
                                    <p:spacer height="1"></p:spacer>
                                    <pe:ckEditor id="geoArea" value="#{programaController.programaSelected.ubicacion}" required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                 readonly="#{!programaController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>                                    
                                    <p:message for="geoArea"></p:message>

                                    <p:outputLabel for="identDescrip" value="* Identificación, descripción y diagnóstico del problema que requiere solución:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <pe:ckEditor id="identDescrip" value="#{programaController.programaSelected.diagnostico}" required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                 readonly="#{!programaController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>  
                                    <p:message for="identDescrip"></p:message>

                                    <p:outputLabel for="lineaBase" value="* Línea Base del programa:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <pe:ckEditor id="lineaBase" value="#{programaController.programaSelected.lineaBase}" required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                 readonly="#{!programaController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>  
                                    <p:message for="lineaBase"></p:message>

                                    <p:outputLabel for="idenCaract" value="* Identificación y caracterización de la población(beneficiarios y participantes):" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <pe:ckEditor id="idenCaract" value="#{programaController.programaSelected.beneficios}" required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                 readonly="#{!programaController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor> 
                                    <p:message for="idenCaract"></p:message>

                                    <p:outputLabel for="facCriticos" value="* Factores críticos del éxito:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <pe:ckEditor id="facCriticos" value="#{programaController.programaSelected.factorCExito}" required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                 readonly="#{!programaController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor> 
                                    <p:message for="facCriticos"></p:message>

                                </h:panelGrid>
                            </p:panel>

                            <!--tab10: Departamentos Participantes-->
                            <p:panel id="panel10" rendered="#{programaController.selectedNodeCode=='1.3.2'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid columns="1" cellpadding="5" id="h10">
                                    <p:commandButton id="btnAgregarP10" value="Agregar" icon="ui-icon-plus" 
                                                     title="Agregar Información" update=":formPrincipal:h10, :formPrincipal:p10" action="#{programaController.agregarP10()}" rendered="#{!programaController.controlGrabarP10}" disabled="#{!programaController.permitirEdicionPerfil}">
                                    </p:commandButton>

                                </h:panelGrid>
                                <p:panel id="p10" visible="#{programaController.controlGrabarP10}" style="padding-left: 30px; border: hidden; ">
                                    <h:panelGrid columns="2" cellpadding="5">
                                        <p:commandButton id="btnGrabarP10" value="Grabar" icon="ui-icon-locked" 
                                                         title="Graba Información" update=":formPrincipal:h10,:formPrincipal:p10,:formPrincipal:dataTableDeptPart, :formPrincipal:message1" 
                                                         action="#{programaController.registraP10}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP10" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" process="@this"
                                                         title="Cancela Información" update=":formPrincipal:h10, :formPrincipal:p10" action="#{programaController.cancelarP10}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="3" cellpadding="5">
                                        <p:outputLabel value="* Campus:" for="selCampus" style="font-weight: bold"/>
                                        <p:selectOneMenu id="selCampus" value="#{programaController.departamentoProgramaSelected.campus}" 
                                                         converter="omnifaces.SelectItemsConverter"
                                                         required="#{not empty param['formPrincipal:btnGrabarP10']}" style="width: 300px">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.campusList}" var="cam" itemLabel="#{cam.stvcampDesc}" itemValue="#{cam}"/>
                                            <p:ajax event="change" update=":formPrincipal:selDepartamentoParticipante,:formPrincipal:btnGrabarP10"/>
                                        </p:selectOneMenu>
                                        <p:message for="selCampus"></p:message>

                                        <p:outputLabel value="* Departamento:" for="selDepartamentoParticipante" style="font-weight: bold"/>
                                        <p:selectOneMenu id="selDepartamentoParticipante" value="#{programaController.departamentoProgramaSelected.departamento}" 
                                                         converter="omnifaces.SelectItemsConverter"
                                                         required="#{not empty param['formPrincipal:btnGrabarP10']}" style="width:300px">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.departamentoProgramaSelected.campus.departamentoList}" var="departamentoPart" itemLabel="#{departamentoPart.stvsubjDesc}" itemValue="#{departamentoPart}"/>
                                        </p:selectOneMenu>                          
                                        <p:message for="selDepartamentoParticipante"></p:message>
                                    </h:panelGrid>

                                </p:panel>
                                <p:dataTable id="dataTableDeptPart" value="#{programaController.departamentoCarreraProgramaList}" var="departamentoPrograma" paginator="true" style="width: 99%"
                                             rows="10" rowIndexVar="index" resizableColumns="true" editable="true" emptyMessage="No se encontraron resultados" >
                                    <p:ajax event="rowEdit" listener="#{programaController.onRowEditP6}" partialSubmit="true"/>
                                    <p:ajax event="rowEditCancel" listener="#{programaController.onRowCancelP6}" partialSubmit="true"/>

                                    <p:column headerText="Nro." style="width: 20px;">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Campus" width="300" sortBy="#{departamentoPrograma.campus.stvcampDesc}" >
                                        <h:outputText value="#{departamentoPrograma.campus.stvcampDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Departamento"  sortBy="#{departamentoPrograma.departamento.stvsubjDesc}">
                                        <h:outputText value="#{departamentoPrograma.departamento.stvsubjDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Eliminar" width="40" style="text-align: center">
                                        <p:commandButton id="btnEliminarP10" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onclick="PF('dialogDeleteDepartamentoPrograma').show();" process="@this" disabled="#{!programaController.permitirEdicionPerfil}">
                                            <f:setPropertyActionListener value="#{departamentoPrograma}" target="#{programaController.svinDepcenproySelected}" />
                                        </p:commandButton>   
                                    </p:column>                           
                                </p:dataTable>
                            </p:panel>

                            <!--tab11: Carreras Participantes-->
                            <p:panel id="panel11" rendered="#{programaController.selectedNodeCode=='1.3.3'}" style="border: hidden; padding-left: 20px">

                                <h:panelGrid columns="1" cellspacing="5" id="h11">
                                    <p:commandButton id="btnAgregarP11" value="Agregar" icon="ui-icon-plus" 
                                                     title="Agregar Información" update=":formPrincipal:h11, :formPrincipal:p11" action="#{programaController.agregarP11}" rendered="#{!programaController.controlGrabarP11}" disabled="#{!programaController.permitirEdicionPerfil}">
                                    </p:commandButton>
                                </h:panelGrid>

                                <p:panel id="p11" visible="#{programaController.controlGrabarP11}" style="padding-left: 30px; border: hidden;">
                                    <h:panelGrid columns="2" cellspacing="5">
                                        <p:commandButton id="btnGrabarP11" value="Grabar" icon="ui-icon-locked"
                                                         title="Graba Información" 
                                                         update=":formPrincipal:h11, :formPrincipal:p11,:formPrincipal:dataTableCarrPart, :formPrincipal:message1" 
                                                         action="#{programaController.registraP11}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP11" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" process="@this"
                                                         title="Cancela Información" update=":formPrincipal:h11, :formPrincipal:p11" action="#{programaController.cancelarP11}">
                                        </p:commandButton>
                                    </h:panelGrid>

                                    <h:panelGrid columns="3" cellpadding="5">
                                        <p:outputLabel for="selCarrera" value="* Seleccione la carrera a agregar:" style="font-weight: bold"/>
                                        <p:selectOneMenu  id="selCarrera"
                                                          value="#{programaController.carreraProgramaSelected.carrera}" 
                                                          required="#{not empty param['formPrincipal:btnGrabarP11']}"
                                                          converter="omnifaces.SelectItemsConverter"
                                                          effect="fade"
                                                          filter="true"
                                                          filterMatchMode="contains">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{programaController.carreraList}" var="carrera" 
                                                           itemValue="#{carrera}" itemLabel="#{carrera.stvmajrDesc}"
                                                           >
                                            </f:selectItems>


                                        </p:selectOneMenu>  
                                        <p:message for="selCarrera"></p:message>

                                    </h:panelGrid>

                                </p:panel>

                                <h:outputLabel value="Nombre de las Carreras Participantes en el Programa:" style="font-weight: bold"/>
                                <p:dataTable  id="dataTableCarrPart" value="#{programaController.carreraProgramaList}" var="carreraPrograma" paginator="true" style="width: 99%"
                                              rows="10" rowIndexVar="index" resizableColumns="true" editable="true" emptyMessage="No se encontraron resultados" >
                                    <p:ajax event="rowEdit" listener="#{programaController.onRowEditP6}" partialSubmit="true"/>
                                    <p:ajax event="rowEditCancel" listener="#{programaController.onRowCancelP6}" partialSubmit="true"/>

                                    <p:column headerText="Nro." style="width: 20px; ">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Carreras Participantes" >
                                        <h:outputText value="#{carreraPrograma.carrera.stvmajrDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Eliminar " style="width: 50px; text-align: center">
                                        <p:commandButton id="btnEliminarP11" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         disabled="#{!programaController.permitirEdicionPerfil}"
                                                         onclick="PF('dialogDeleteCarreraPrograma').show();" process="@this">
                                            <f:setPropertyActionListener value="#{carreraPrograma}" target="#{programaController.carreraProgramaSelected}" />
                                        </p:commandButton>   
                                    </p:column>                           
                                </p:dataTable>

                            </p:panel>

                            <!--tab15: Matriz del Marco Lógico-->
                            <p:panel id="panel15" rendered="#{programaController.selectedNodeCode=='1.4'}" style="border: hidden; padding-left: 20px">
                                <p:focus context="panel15"/>
                                <h:panelGrid id="p15" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid rendered="#{programaController.controlGrabar}"  columns="1" style="width: 100%; ">
                                        <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                            <p:commandButton id="btnGrabarP15" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                             update=":formPrincipal:panel15, :formPrincipal:message1" 
                                                             action="#{programaController.registraP15}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                            </p:commandButton>
                                            <p:commandButton id="btnCancelarP15" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w"
                                                             title="Cancela Información" update=":formPrincipal:p15" action="#{programaController.cancelarP15(true)}">
                                            </p:commandButton>
                                        </h:panelGrid>  
                                        <h:panelGrid columns="3" cellpadding="5" id="pInput15" columnClasses="col1_objetivos">
                                            <p:outputLabel value="#{programaController.objetivoProgramaSelected.svopTipo==1 ? '* Fin:':(programaController.objetivoProgramaSelected.svopTipo==2?'* Objetivo General:':'* Objetivo Específico:')}" for="txtObjetivo15" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtObjetivo15" cols="150" rows="3" value="#{programaController.objetivoProgramaSelected.svopObjetivoProy}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>
                                            <p:message for="txtObjetivo15"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="9" cellpadding="5" columnClasses="col1_objetivos">

                                            <p:outputLabel for="selIndicadorTipo" value="* Tipo Indicador:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="selIndicadorTipo" 
                                                             required="#{not empty param['formPrincipal:btnGrabarP15']}" 
                                                             style="width:70px;" 
                                                             value="#{programaController.objetivoProgramaSelected.indicadorTipo}" 
                                                             >
                                                <f:selectItem itemLabel="Valor" itemValue="1"/>
                                                <f:selectItem itemLabel="Porcentaje" itemValue="2"/>
                                            </p:selectOneMenu>
                                            <p:message for="selIndicadorTipo"></p:message>

                                            <p:outputLabel for="txtIndicadorValor" value="* Valor Indicador:" style="font-weight: bold"/>
                                            <pe:inputNumber id="txtIndicadorValor" value="#{programaController.objetivoProgramaSelected.indicadorValor}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP15']}"
                                                            >  
                                            </pe:inputNumber>
                                            <p:message for="txtIndicadorValor"></p:message>

                                            <p:outputLabel for="txtIndicador15" value="* Descripción Indicador:" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtIndicador15" cols="60" rows="3" value="#{programaController.objetivoProgramaSelected.svopIndicador}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>                             
                                            <p:message for="txtIndicador15"></p:message>
                                        </h:panelGrid>

                                        <h:panelGrid columns="3" cellpadding="5" columnClasses="col1_objetivos">

                                            <p:outputLabel value="* Medio de verificación:" for="txtIndicador15" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtMedioVerificacion15" cols="150" rows="3" value="#{programaController.objetivoProgramaSelected.svopMverifica}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>                             
                                            <p:message for="txtMedioVerificacion15"></p:message>

                                            <p:outputLabel for="txtSupuestos15" value="* Supuestos:" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtSupuestos15" cols="150" rows="3" value="#{programaController.objetivoProgramaSelected.svopSupuestos}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>                             
                                            <p:message for="txtSupuestos15"></p:message>

                                        </h:panelGrid>
                                    </h:panelGrid>

                                </h:panelGrid>                         
                                <h:outputLabel for="dataTObjetivos" value="Matriz del Marco Lógico:" style="font-weight: bold"/>
                                <p:dataTable id="dataTObjetivos" value="#{programaController.programaSelected.objetivoProgramaPadreList}" var="objetivoPrograma" paginator="false"
                                             expandedRow="#{objetivoPrograma.expanded}" rows="10" rowIndexVar="index" resizableColumns="false"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:ajax event="rowToggle" listener="#{programaController.onRowToggleObjetivoProyecto}"/> 
                                    <p:column style="width: 20px" rendered="false">
                                        <p:rowToggler rendered="#{objetivoPrograma.svopTipo!=1}"/>
                                    </p:column>
                                    <p:column headerText="Nro." width="20" rendered="false" >
                                        <h:outputText value="#{objetivoPrograma.svopOrden}"/>
                                    </p:column>
                                    <p:column headerText="" width="70">
                                        <h:outputText value="#{objetivoPrograma.tipoStr}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Descripción" width="140"> 
                                        <h:outputText value="#{objetivoPrograma.svopObjetivoProy}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Tipo Indicador" width="50">
                                        <h:outputText value="#{objetivoPrograma.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Valor Indicador" width="50">
                                        <h:outputText value="#{objetivoPrograma.indicadorValor}" style="white-space: pre-line;">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Descripción Indicador" width="140">
                                        <h:outputText value="#{objetivoPrograma.svopIndicador}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Medio de verificación" width="140">
                                        <h:outputText value="#{objetivoPrograma.svopMverifica}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Supuestos">
                                        <h:outputText value="#{objetivoPrograma.svopSupuestos}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Editar" width="35" style ="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         disabled="#{!programaController.permitirEdicionPerfil}"
                                                         title="Editar el registro" action="#{programaController.seleccionarEdicion()}"
                                                         update=":formPrincipal:panel15"
                                                         >
                                            <f:setPropertyActionListener value="#{objetivoPrograma}" target="#{programaController.objetivoProgramaSelected}"/>
                                        </p:commandButton>

                                    </p:column> 
                                    <p:column headerText="Eliminar" width="38" style="text-align: center" >
                                        <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                         disabled="true"
                                                         >
                                            <f:setPropertyActionListener value="#{componente}" target="#{programaController.objetivoProgramaSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el objetivo seleccionado?" icon="ui-icon-alert" />
                                        </p:commandButton>   
                                    </p:column>

                                    <p:rowExpansion  >
                                        <p:panel style="border:hidden; width:99%; padding-left: 20px">
                                            <h:outputLabel value="Componentes (objetivos específicos):" style="font-weight: bold"/>
                                            <p:commandButton value="" title="Agregar Componente (Objetivo Específico)" icon="ui-icon-plus"
                                                             style="width: 30px; height: 20px"
                                                             disabled="#{!programaController.permitirEdicionPerfil}"
                                                             action="#{programaController.agregarP15}"
                                                             update=":formPrincipal:panel15"
                                                             >
                                                <f:setPropertyActionListener value="#{objetivoPrograma}" target="#{programaController.objetivoProgramaPadreSelected}"/>
                                            </p:commandButton>
                                            <p:dataTable id="dataTComponentes" value="#{objetivoPrograma.svinObjetivoHijoList}" var="componente"
                                                         expandedRow="false" rowIndexVar="index" styleClass="hide-column-names"
                                                         emptyMessage="No existen registros"> 
                                                <p:column headerText="Nro." style="width:20px;">
                                                    <h:outputText value="#{componente.svopOrden}" />
                                                </p:column>
                                                <p:column headerText="Descripción" style="width: 150px"> 
                                                    <h:outputText value="#{componente.svopObjetivoProy}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Tipo Indicador" style="width: 50px">
                                                    <h:outputText value="#{componente.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Valor Indicador" style="width: 50px">
                                                    <h:outputText value="#{componente.indicadorValor}" style="white-space: pre-line;">
                                                        <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Descripción Indicador" style="width: 140px">
                                                    <h:outputText value="#{componente.svopIndicador}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Medio de verificación" style="width: 140px">
                                                    <h:outputText value="#{componente.svopMverifica}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Supuestos">
                                                    <h:outputText value="#{componente.svopSupuestos}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Editar" style ="width: 30px; text-align: center">
                                                    <p:commandButton icon="ui-icon-pencil"
                                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                                     title="Editar el registro" action="#{programaController.seleccionarEdicion()}"
                                                                     update=":formPrincipal:panel15"
                                                                     >
                                                        <f:setPropertyActionListener value="#{componente}" target="#{programaController.objetivoProgramaSelected}"/>
                                                    </p:commandButton>

                                                </p:column>                                                    
                                                <p:column headerText="Eliminar"  style ="width: 30px; text-align: center">
                                                    <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                                     update=":formPrincipal:panel15"
                                                                     action="#{programaController.eliminarP15()}">
                                                        <f:setPropertyActionListener value="#{componente}" target="#{programaController.objetivoProgramaSelected}" />
                                                        <p:confirm header="Confirmación" message="Confirma que desea eliminar el objetivo seleccionado?" icon="ui-icon-alert" />
                                                    </p:commandButton>   
                                                </p:column>

                                            </p:dataTable>
                                        </p:panel>
                                    </p:rowExpansion>                                        
                                </p:dataTable>
                            </p:panel>

                            <!--tab12: Estrategias para la Ejecución del Programa-->
                            <p:panel id="panel12" rendered="#{programaController.selectedNodeCode=='1.5'}" style="border: hidden; padding-left: 20px">
                                <h:panelGrid columns="2" cellpadding="7" id="h12">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{programaController.seleccionarEdicion}"
                                                     rendered="#{!programaController.modoEdicion}"
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     update=":formPrincipal:h12,:formPrincipal:pInput12" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP12" value="Grabar" icon="ui-icon-locked" 
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Graba Información" update=":formPrincipal:h12,:formPrincipal:pInput12,:formPrincipal:message1" action="#{programaController.registraPerfilPrograma}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP12" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" 
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Cancela Información" update=":formPrincipal:h12,:formPrincipal:pInput12" action="#{programaController.cancelarPerfilPrograma}">
                                    </p:commandButton>
                                </h:panelGrid>
                                <h:panelGrid columns="2" cellpadding="5" id="pInput12">
                                    <p:outputLabel  for="metProg" value="* Metas del Programa:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <p:inputTextarea id="metProg" cols="160" rows="7" value="#{programaController.programaSelected.metas}" required="#{not empty param['formPrincipal:btnGrabarP12']}" disabled="#{!programaController.modoEdicion}"></p:inputTextarea>                             
                                    <p:message for="metProg"></p:message>

                                    <p:outputLabel for="poliProg" value="* Políticas del Programa para la ejecucion de Proyectos:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <p:inputTextarea id="poliProg" cols="160" rows="7" value="#{programaController.programaSelected.politicas}" required="#{not empty param['formPrincipal:btnGrabarP12']}" disabled="#{!programaController.modoEdicion}"></p:inputTextarea> 
                                    <p:message for="poliProg"></p:message>
                                </h:panelGrid>

                            </p:panel>

                            <!--tab13: Viabilidad y Plan de Sostenibilidad-->
                            <p:panel id="panel13" rendered="#{programaController.selectedNodeCode=='1.6'}" style="border: hidden; padding-left: 20px">

                                <h:panelGrid columns="2" cellpadding="7" id="h13">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{programaController.seleccionarEdicion}"
                                                     rendered="#{!programaController.modoEdicion}"
                                                     disabled="#{!programaController.permitirEdicionPerfil}"
                                                     update=":formPrincipal:h13,:formPrincipal:pInput13" >
                                    </p:commandButton>

                                    <p:commandButton id="btnGrabarP13" value="Grabar" icon="ui-icon-locked" 
                                                     title="Graba Información" update=":formPrincipal:h13,:formPrincipal:pInput13,:formPrincipal:message1" action="#{programaController.registraPerfilPrograma}"
                                                     rendered="#{programaController.modoEdicion}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP13" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" 
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Cancela Información" update=":formPrincipal:h13,:formPrincipal:pInput13" action="#{programaController.cancelarPerfilPrograma}">
                                    </p:commandButton>

                                </h:panelGrid>
                                <h:panelGrid columns="2" cellpadding="5" id="pInput13">
                                    <p:outputLabel  for="viaTecnica" value="* Viabilidad Técnica:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <p:inputTextarea id="viaTecnica" cols="160" rows="5" value="#{programaController.programaSelected.viabilidadTecnica}" required="#{not empty param['formPrincipal:btnGrabarP13']}" disabled="#{!programaController.modoEdicion}" maxlength="3000"></p:inputTextarea>
                                    <p:message for="viaTecnica"></p:message>

                                    <p:outputLabel for="perdPais" value="* ¿Qué perdería el país si el programa no se ejecuta?:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <p:inputTextarea id="perdPais" cols="160" rows="5" value="#{programaController.programaSelected.perderiaNoEjecuta}" required="#{not empty param['formPrincipal:btnGrabarP13']}" disabled="#{!programaController.modoEdicion}" maxlength="3000"></p:inputTextarea> 
                                    <p:message for="perdPais"></p:message>

                                    <p:outputLabel for="resulImp" value="* ¿Cuáles son los resultados o impactos esperados del programa?:" style="font-weight: bold"/>
                                    <p:spacer height="1"></p:spacer>
                                    <p:inputTextarea id="resulImp" cols="160" rows="5" value="#{programaController.programaSelected.resultadosImpacto}" required="#{not empty param['formPrincipal:btnGrabarP13']}" disabled="#{!programaController.modoEdicion}" maxlength="3000"></p:inputTextarea> 
                                    <p:message for="resulImp"></p:message>
                                </h:panelGrid> 
                            </p:panel>                        

                            <!--tab18: Actividades-->
                            <p:panel id="panel18" rendered="#{programaController.selectedNodeCode=='1.7'}" style="border: hidden; padding-left: 20px">

                                <h:panelGrid id="h18" columns="1" style="padding-bottom: 10px">
                                    <p:commandButton id="btnAgregarP18" value="Agregar" title="Agregar Información" icon="ui-icon-plus"
                                                     update=":formPrincipal:p18, :formPrincipal:h18" 
                                                     disabled="#{!programaController.permitirEdicionProyectosPlanificados}"
                                                     action="#{programaController.agregarP18()}" 
                                                     rendered="#{!programaController.controlGrabarP18}">
                                    </p:commandButton>

                                </h:panelGrid>
                                <p:panel id="p18" visible="#{programaController.controlGrabarP18}" style="padding-left: 30px; border: hidden; ">
                                    <p:focus context="p18"/>
                                    <h:panelGrid columns="2" cellspacing="5">
                                        <p:commandButton id="btnGrabarP18" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                         action="#{programaController.registraP18()}" 
                                                         update=":formPrincipal:p18,:formPrincipal:h18,:formPrincipal:dataTableActividades, :formPrincipal:message1"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP18" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" process="@this"
                                                         update=":formPrincipal:p18,:formPrincipal:h18"
                                                         action="#{programaController.cancelarP18}">
                                        </p:commandButton>
                                    </h:panelGrid>                         
                                    <h:panelGrid columns="2" cellpadding="0" columnClasses="col1_actividad">
                                        <p:outputLabel value="* Proyecto:" for="txtProyectoActividad" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:inputTextarea id="txtProyectoActividad" value="#{programaController.nombreActividad}" cols="100" rows="2"
                                                             required="#{not empty param['formPrincipal:btnGrabarP18']}" maxlength="500"></p:inputTextarea>
                                            <p:message for="txtProyectoActividad"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel value="* Año:" for="txtAnioActividad" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtAnioActividad" value="#{programaController.anioActividad}" thousandSeparator="" decimalPlaces="0" styleClass="inputNumber" maxValue="2100"
                                                            required="#{not empty param['formPrincipal:btnGrabarP18']}"></pe:inputNumber>
                                            <p:message for="txtAnioActividad"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel value="* Presupuesto planificado-Gasto Permanente(USD):" for="txtPresupuestoActividad" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtPresupuestoActividad" value="#{programaController.presupuestoActividadGastoPermanente}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP18']}"> </pe:inputNumber>
                                            <p:message for="txtPresupuestoActividad"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel value="* Presupuesto planificado-Gasto No Permanente(USD):" for="txtPresupuestoActividad2" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtPresupuestoActividad2" value="#{programaController.presupuestoActividadGastoNoPermanente}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP18']}"> </pe:inputNumber>
                                            <p:message for="txtPresupuestoActividad2"></p:message>
                                        </h:panelGrid>

                                        <p:outputLabel value="* Nro. beneficiarios planificado:" for="txtNroBeneficiariosActividad" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtNroBeneficiariosActividad" value="#{programaController.nroBeneficiariosActividad}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP18']}"></pe:inputNumber>
                                            <p:message for="txtNroBeneficiariosActividad"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>

                                </p:panel>
                                <h:outputLabel for="dataTableActividades" value="Listado de proyectos planificados:" style="font-weight: bold"/>
                                <p:dataTable id="dataTableActividades" value="#{programaController.actividadProgramaList}" var="actividad"
                                             style="width: 99%; padding-top: 5px" paginator="true" rows="10" rowIndexVar="index"  resizableColumns="true" 
                                             emptyMessage="No se encontraron resultados">
                                    <p:column headerText="Nro." style="width:20px">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Proyecto" style="white-space:pre-line" >
                                        <h:outputText value="#{actividad.descripcion}" style="white-space: pre-line; "/>
                                    </p:column>
                                    <p:column headerText="Año" style="width: 70px;white-space:pre-line;text-align: center">
                                        <h:outputText value="#{actividad.anio}" style="text-align: center ">
                                            <f:convertNumber locale="es_ES"  pattern="####" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Presupuesto planificado- Gasto Permanente (USD)" style="width: 70px;white-space:pre-line">
                                        <h:outputText value="#{actividad.presupuestoGastoPermanente}" style="float:right">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Presupuesto planificado- Gasto No Permanente (USD)" style="width: 70px;white-space:pre-line">
                                        <h:outputText value="#{actividad.presupuestoGastoNoPermanente}" style="float:right">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0.00" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Nro. Beneficiarios planificado" style="width: 70px;white-space:pre-line;">
                                        <h:outputText value="#{actividad.nroBeneficiarios}" style="float:right">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Editar" style="width: 40px; text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         disabled="#{!programaController.permitirEdicionProyectosPlanificados}"
                                                         title="Editar el registro" update=":formPrincipal:p18, :formPrincipal:h18" action="#{programaController.seleccionarP18()}"
                                                         >
                                            <f:setPropertyActionListener value="#{actividad}" target="#{programaController.actividadPrograma}"/>
                                        </p:commandButton>
                                    </p:column>
                                    <p:column headerText="Eliminar" style="width: 40px;text-align: center">
                                        <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         disabled="#{!programaController.permitirEdicionProyectosPlanificados}"
                                                         update=":formPrincipal:panel18"
                                                         action="#{programaController.eliminarP18}">
                                            <f:setPropertyActionListener value="#{actividad}" target="#{programaController.actividadPrograma}"/>
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />                                            
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>

                            <!--panelAnexoDiagnosticoProblema-->
                            <p:panel id="panelAnexoDiagnosticoProblema" rendered="#{programaController.selectedNodeCode=='1.3.4'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionAnexoDiagnosticoProblema" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:focus context="panelEdicionAnexoDiagnosticoProblema"/>
                                    <h:panelGrid columns="2" rendered="#{programaController.anexoProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar Anexo" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionAnexoDiagnosticoProblema, :formPrincipal:message1"
                                                         action="#{programaController.nuevoAnexoDiagnosticoProblema}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" rendered="#{programaController.anexoProyectoSelected !=null}">
                                        <p:fieldset legend="NUEVO ANEXO">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAnexoDiagnosticoProblema" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelAnexoDiagnosticoProblema, :formPrincipal:message1" 
                                                                 action ="#{programaController.grabarAnexo}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelAnexoDiagnosticoProblema" 
                                                                 action="#{programaController.cancelarAnexo}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_anexo_diagnostico_problema">
                                                <p:outputLabel for="txtFechaAnexoDiagnosticoProblema" value="* Fecha subida:" style="font-weight: bold"></p:outputLabel>
                                                <p:inputText id="txtFechaAnexoDiagnosticoProblema" value="#{programaController.anexoProyectoSelected.fechaSubida}"
                                                             style="width: 100px" disabled="true">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                </p:inputText>

                                                <p:outputLabel value="* Documento adjunto (jpg|jpeg|png):" for="hidNombreAnexoDiagnosticoProblema"  style="font-weight: bold"/>
                                                <h:panelGrid columns="3">
                                                    <h:panelGrid columns="1" cellpadding="0" cellspacing="0"> 
                                                        <p:outputLabel id="lblNombreAnexoDiagnosticoProblema" value="#{programaController.anexoProyectoSelected.archivoNombre}"/>
                                                        <p:fileUpload id="fileAnexoDiagnosticoProblema" fileUploadListener="#{programaController.subirAnexoDiagnosticoProblema}" 
                                                                      required="#{not empty param['formPrincipal:btnGrabarAnexoDiagnosticoProblema']}" 
                                                                      mode="advanced" 
                                                                      label="Seleccionar"
                                                                      invalidFileMessage="Tipo de archivo incorrecto: "
                                                                      invalidSizeMessage="Tamaño del archivo seleccionado excede el límite permitido (10MB): "
                                                                      allowTypes="/(\.|\/)(jpg|jpeg|png)$/"
                                                                      update=":formPrincipal:lblNombreAnexoDiagnosticoProblema, :formPrincipal:hidNombreAnexoDiagnosticoProblema, :formPrincipal:message1" auto="true" sizeLimit="10240000"/>

                                                    </h:panelGrid>
                                                    <h:inputHidden id="hidNombreAnexoDiagnosticoProblema" value="#{programaController.anexoProyectoSelected.archivoNombre}"
                                                                   required="#{not empty param['formPrincipal:btnGrabarAnexoDiagnosticoProblema']}"></h:inputHidden>                                                    
                                                    <p:message for="hidNombreAnexoDiagnosticoProblema"></p:message> 
                                                </h:panelGrid>                                                

                                            </h:panelGrid>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel value="Listado de imágenes de Diagnóstico y Problema:" style="font-weight: bold"/>
                                <p:dataTable id="dtAnexosDiagnosticoProblema" value="#{programaController.programaSelected.anexoList}" var="anexoDiagnosticoProblema"
                                             rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                             emptyMessage="No se encontraron resultados">
                                    <p:column headerText="Nro." width="20" >
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Fecha subida" width="80" sortBy="#{anexoDiagnosticoProblema.fechaSubida}">
                                        <h:outputText value="#{anexoDiagnosticoProblema.fechaSubida}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Nombre Anexo" sortBy="#{anexoDiagnosticoProblema.archivoNombre}">
                                        <h:outputText value="#{anexoDiagnosticoProblema.archivoNombre}" style="white-space: pre-line"></h:outputText>
                                    </p:column>

                                    <p:column headerText="Descargar" width="50" style="text-align: center">
                                        <p:commandButton actionListener="#{programaController.prepararArchivoDownload(anexoDiagnosticoProblema)}"
                                                         ajax="false" icon="ui-icon-arrowthick-1-s" title="Descargar anexo">
                                            <p:fileDownload value="#{programaController.archivoAdjunto}" />
                                        </p:commandButton>
                                    </p:column>                                    
                                    <p:column headerText="Eliminar" width="50" style="text-align: center" >
                                        <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{programaController.eliminarAnexo}"
                                                         update=":formPrincipal:panelAnexoDiagnosticoProblema, :formPrincipal:message1 ">
                                            <f:setPropertyActionListener value="#{anexoDiagnosticoProblema}" target="#{programaController.anexoProyectoSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el anexo seleccionado ?" icon="ui-icon-alert" />
                                        </p:commandButton>  
                                    </p:column>

                                </p:dataTable>                                               


                            </p:panel>                             

                            <!--panelAvance-->
                            <p:panel id="panelAvance" rendered="#{programaController.selectedNodeCode=='2.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionAvance" columns="1" >
                                    <h:panelGrid columns="1" rendered="#{programaController.avanceComponenteSelected==null}">
                                        <p:outputLabel value="#{programaController.programaSelected.mensajePermitirSeguimiento}" style="color:red"></p:outputLabel>
                                        <p:commandButton id="btnAgregarAvance" value="Agregar" title="Agregar Información" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelAvance"
                                                         disabled="#{!programaController.permitirEdicionSeguimiento}"
                                                         actionListener="#{programaController.agregarAvance}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" rendered="#{programaController.avanceComponenteSelected!=null}">
                                        <p:fieldset legend="#{programaController.avanceComponenteSelected.id==null ? 'NUEVO INFORME DE AVANCE':'EDICION DE INFORME DE AVANCE'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAvance" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelAvance, :formPrincipal:message1" 
                                                                 action ="#{programaController.registrarAvance}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelAvance" 
                                                                 action="#{programaController.cancelarAvance}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0">

                                                <p:outputLabel for="txtFechaAvance" value="Fecha (dd/mm/aaaa):" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaAvance" navigator="true" value="#{programaController.avanceComponenteSelected.fecha}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="true">
                                                    </p:calendar>                                            
                                                    <p:message for="txtFechaAvance"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel for="txtObservacionAvance" value="Observación:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:inputTextarea id="txtObservacionAvance" cols="100" rows="2"
                                                                     value="#{programaController.avanceComponenteSelected.observacion}"></p:inputTextarea>
                                                    <p:message for="txtObservacionAvance"></p:message>
                                                </h:panelGrid>



                                            </h:panelGrid>
                                            <h:outputLabel value="Componentes:" style="font-weight: bold"/>
                                            <p:dataTable value="#{programaController.avanceComponenteSelected.avanceActividadList}" var="avanceActiv"
                                                         editable="true" style="width: 100%; margin-bottom: 10px" rowIndexVar="index"  resizableColumns="true" 
                                                         emptyMessage="No se encontraron resultados">

                                                <p:column headerText="Nro." width="20" >
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Componente" style="white-space:pre-line">
                                                    <h:outputText value="#{avanceActiv.actividad.svopObjetivoProy}" style="white-space: pre-line; width: 100%"/>
                                                </p:column>
                                                <p:column headerText="Resultados esperados" width="120">
                                                    <h:outputText value="#{avanceActiv.actividad.svopIndicador}"></h:outputText>
                                                </p:column>                                            
                                                <p:column headerText="Resultado" width="120" style="white-space:pre-line">
                                                    <p:inputTextarea id="txtResultadoActividadAvance" rows="1" style="width: 97%" value="#{avanceActiv.resultado}" autoResize="false" maxlength="250"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAvance']}"></p:inputTextarea>  
                                                    <p:message for="txtResultadoActividadAvance"></p:message>
                                                </p:column>
                                                <p:column headerText="Avance total(%)" width="60" style="white-space:pre-line; text-align: center">
                                                    <pe:inputNumber id="txtPorcentajeActividadAvance" value="#{avanceActiv.porcentajeAvance}" decimalPlaces="0" minValue="0" maxValue="100" styleClass="inputNumberPorcentaje"
                                                                    symbol=" %" symbolPosition="s"  
                                                                    required="#{not empty param['formPrincipal:btnGrabarAvance']}">
                                                    </pe:inputNumber>
                                                    <p:message for="txtPorcentajeActividadAvance"></p:message>
                                                </p:column>     
                                                <p:column headerText="Observación" width="120" style="white-space:pre-line">
                                                    <p:inputTextarea id="txtObservacionActividadAvance" rows="1" style="width: 97%" value="#{avanceActiv.observacion}" autoResize="false" maxlength="250"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAvance']}"></p:inputTextarea>  
                                                    <p:message for="txtObservacionActividadAvance"></p:message>
                                                </p:column>
                                            </p:dataTable>   
                                        </p:fieldset>

                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Listado de seguimientos:" style="font-weight: bold"/>
                                    <p:dataTable value="#{programaController.objetivoProgramaSelected.avanceComponenteList}" var="avanceComp" paginator="true"
                                                 style="width: 99%"
                                                 rows="10" rowIndexVar="index" resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column style="width: 20px">
                                            <p:rowToggler/>
                                        </p:column>
                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>

                                        <p:column headerText="Fecha" width="120" sortBy="#{avanceComp.fecha}">
                                            <h:outputText value="#{avanceComp.fecha}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Observación" sortBy="#{avanceComp.observacion}">
                                            <h:outputText value="#{avanceComp.observacion}"/>
                                        </p:column>

                                        <p:column headerText="Editar" width="35" style ="text-align: center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Editar el registro" action="#{programaController.seleccionarEdicion()}"
                                                             disabled="#{!programaController.permitirEdicionSeguimiento}"
                                                             update=":formPrincipal:panelEdicionAvance"
                                                             >
                                                <f:setPropertyActionListener value="#{avanceComp}" target="#{programaController.avanceComponenteSelected}"/>
                                            </p:commandButton>

                                        </p:column>                                         

                                        <p:column headerText="Eliminar " style="width: 50px; text-align: center" >
                                            <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                             update=":formPrincipal:panelAvance, :formPrincipal:message1" 
                                                             disabled="#{!programaController.permitirEdicionSeguimiento}"
                                                             action="#{programaController.eliminarAvance}"
                                                             >
                                                <f:setPropertyActionListener value="#{avanceComp}" target="#{programaController.avanceComponenteSelected}" />
                                                <p:confirm header="Confirmación" message="Confirma que desea eliminar el registro de seguimiento seleccionado ?" icon="ui-icon-alert" />
                                            </p:commandButton>   
                                        </p:column>



                                        <p:rowExpansion >
                                            <p:panelGrid columns="1" style="border:hidden;width:100%; "  >
                                                <p:dataTable value="#{avanceComp.avanceActividadList}" var="avanceActividad"
                                                             rendered="#{not empty avanceComp.avanceActividadList}"
                                                             rowIndexVar="index" style="width: 98%; padding-left: 30px">
                                                    <p:column headerText="Nro." width="20">
                                                        <h:outputText value="#{index + 1}" />
                                                    </p:column>
                                                    <p:column headerText="Componente">
                                                        <h:outputText value="#{avanceActividad.actividad.svopObjetivoProy}" style="white-space: pre-line"/>
                                                    </p:column>
                                                    <p:column headerText="Resultados esperados" width="120">
                                                        <h:outputText value="#{avanceActividad.actividad.svopIndicador}"></h:outputText>
                                                    </p:column>                                            
                                                    <p:column headerText="Resultado" width="120" style="white-space:pre-line">
                                                        <h:outputText value="#{avanceActividad.resultado}"></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Avance total (%)" width="60" style="white-space:pre-line; text-align: center">
                                                        <h:outputText value="#{avanceActividad.porcentajeAvance}" style="white-space: pre-line"/>
                                                    </p:column>     
                                                    <p:column headerText="Observación" width="120" style="white-space:pre-line">
                                                        <h:outputText value="#{avanceActividad.observacion}" style="white-space: pre-line"/>
                                                    </p:column>

                                                </p:dataTable>
                                            </p:panelGrid>
                                        </p:rowExpansion>                                        

                                    </p:dataTable>                                  

                                </h:panelGrid>

                            </p:panel>                            

                            <!--panelFinalizarSeguimiento-->
                            <p:panel id="panelFinalizarSeguimiento" rendered="#{programaController.selectedNodeCode=='2.2'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarSeguimiento" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE SEGUIMIENTO">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{programaController.programaSelected.mensajePermitirSeguimiento}" style="color:red"></p:outputLabel>
                                            <p:outputLabel rendered="#{programaController.programaSelected.estado=='CEP'}" value="Una vez finalizado el proceso, no se podrá modificar la información de ejecución del proyecto..." style="font-weight: bold"></p:outputLabel>
                                            <p:outputLabel rendered="#{programaController.programaSelected.estado=='CES' or programaController.programaSelected.estado=='CER' or programaController.programaSelected.estado=='EVA'}" value="Proceso de seguimiento Finalizado" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>
                                            <p:outputLabel value="- Debe registrar el seguimiento de la ejecución del proyecto (punto 1, en seguimiento)" style="color:red"
                                                           rendered="#{programaController.msgSeguimiento}"></p:outputLabel>

                                            <p:commandButton id="btnFinalizarSeguimiento" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{!programaController.permitirEdicionSeguimiento}"
                                                             update=":formPrincipal:panelFinalizarSeguimiento,  :formPrincipal:panelTitulo,  :formPrincipal:message1"
                                                             action ="#{programaController.finalizarSeguimiento}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el proceso de seguimiento del programa ?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>     


                            <!--panelCierrePresupuesto-->
                            <p:panel id="panelCierrePresupuesto" rendered="#{programaController.selectedNodeCode=='3.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Presupuesto por proyecto:" style="font-weight: bold"/>
                                    <p:dataTable value="#{programaController.programaSelected.proyectoActivoList}" var="proy"
                                                 rowIndexVar="index" resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column rowspan="2" headerText="Nro." />
                                                <p:column rowspan="2" headerText="Proyecto" />
                                                <p:column colspan="5" headerText="Presupuesto Planificado" />
                                                <p:column colspan="5" headerText="Presupuesto Ejecutado" />
                                            </p:row>
                                            <p:row>
                                                <p:column headerText="Aporte de la Universidad (Gasto No Permanente)" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Universidad (Gasto Permanente)" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Entidad Auspiciante" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Comunidad Beneficiaria" style="white-space: pre-line"/>
                                                <p:column headerText="Total" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Universidad (Gasto No Permanente)" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Universidad (Gasto Permanente)" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Entidad Auspiciante" style="white-space: pre-line"/>
                                                <p:column headerText="Aporte de la Comunidad Beneficiaria" style="white-space: pre-line"/>
                                                <p:column headerText="Total" />
                                            </p:row>
                                        </p:columnGroup>                                        

                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>

                                        <p:column style="white-space: pre-line">
                                            <h:outputText value="#{proy.nombre}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoUniversidadGastoNoPermanenteStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoUniversidadGastoPermanenteStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoEntidadAuspicianteStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoComunidadBeneficiariaStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoStr}"/>
                                        </p:column>

                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoEjecutadoUniversidadGastoNoPermanenteStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoEjecutadoUniversidadGastoPermanenteStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoEjecutadoEntidadAuspicianteStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoEjecutadoComunidadBeneficiariaStr}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy.totalPresupuestoEjecutadoStr}"/>
                                        </p:column>

                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoUniversidadGastoNoPermanenteStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoUniversidadGastoPermanenteStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoEntidadAuspicianteStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoComunidadBeneficiariaStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoStr}" style="text-align: center"></p:column>

                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoEjecutadoUniversidadGastoNoPermanenteStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoEjecutadoUniversidadGastoPermanenteStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoEjecutadoEntidadAuspicianteStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoEjecutadoComunidadBeneficiariaStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalPresupuestoEjecutadoStr}" style="text-align: center"></p:column>
                                            </p:row>
                                        </p:columnGroup>                                           
                                    </p:dataTable>                                  
                                </h:panelGrid>
                            </p:panel>  



                            <!--panelCierreBeneficiarios-->
                            <p:panel id="panelCierreBeneficiarios" rendered="#{programaController.selectedNodeCode=='3.2'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Beneficiarios por proyecto:" style="font-weight: bold"/>
                                    <p:dataTable value="#{programaController.programaSelected.proyectoActivoList}" var="proy2"
                                                 rowIndexVar="index" resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column rowspan="2" headerText="Nro." style="width: 20px"/>
                                                <p:column rowspan="2" headerText="Proyecto" />
                                                <p:column colspan="5" headerText="Directos" />
                                                <p:column headerText="Indirectos" />
                                                <p:column rowspan="2" headerText="Total" />
                                            </p:row>
                                            <p:row>
                                                <p:column headerText="Hombres" style="white-space: pre-line"/>
                                                <p:column headerText="Mujeres" style="white-space: pre-line"/>
                                                <p:column headerText="Niños" style="white-space: pre-line"/>
                                                <p:column headerText="Personas con capacidades especiales" style="white-space: pre-line"/>
                                                <p:column headerText="Total" style="white-space: pre-line"/>
                                                <p:column headerText="Total" style="white-space: pre-line"/>
                                            </p:row>
                                        </p:columnGroup>                                        

                                        <p:column headerText="Nro." style="width: 20px">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>

                                        <p:column style="white-space: pre-line">
                                            <h:outputText value="#{proy2.nombre}"/>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosDirectosEjecutadosHombres}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosDirectosEjecutadosMujeres}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosDirectosEjecutadosNinios}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosDirectosEjecutadosDiscapacidad}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosDirectosEjecutados}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosIndirectosEjecutados}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column style="text-align: center">
                                            <h:outputText value="#{proy2.totalBeneficiariosEjecutados}">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosDirectosEjecutadosHombresStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosDirectosEjecutadosMujeresStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosDirectosEjecutadosNiniosStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosDirectosEjecutadosDiscapacidadStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosDirectosEjecutadosStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosIndirectosEjecutadosStr}" style="text-align: center"></p:column>
                                                <p:column footerText="#{programaController.programaSelected.totalBeneficiariosEjecutadosStr}" style="text-align: center"></p:column>
                                            </p:row>
                                        </p:columnGroup>                                          

                                    </p:dataTable>                                  
                                </h:panelGrid>
                            </p:panel>            


                            <!--panelCierreLeccionAprendida-->
                            <p:panel id="panelCierreLeccionAprendida" rendered="#{programaController.selectedNodeCode=='3.3'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionCierreLeccionAprendida" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:focus context="panelEdicionCierreLeccionAprendida"/>
                                    <h:panelGrid columns="1" rendered="#{programaController.leccionAprendidaProgramaSelected==null}">
                                        <p:outputLabel value="#{programaController.programaSelected.mensajePermitirCierre}" style="color:red"></p:outputLabel>
                                        <p:commandButton value="Agregar" title="Agregar lección aprendida" icon="ui-icon-plus" 
                                                         disabled="#{!programaController.permitirEdicionCierre}"
                                                         update=":formPrincipal:panelEdicionCierreLeccionAprendida, :formPrincipal:message1"
                                                         action="#{programaController.nuevoCierreLeccionAprendida}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" rendered="#{programaController.leccionAprendidaProgramaSelected !=null}">
                                        <p:fieldset legend="#{programaController.leccionAprendidaProgramaSelected.id==null ? 'NUEVA LECCION APRENDIDA':'EDICION DE LECCIN APRENDIDA'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarCierreLeccionAprendida" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelCierreLeccionAprendida, :formPrincipal:message1" 
                                                                 action ="#{programaController.grabarCierreLeccionAprendida}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelCierreLeccionAprendida" 
                                                                 action="#{programaController.cancelarCierreLeccionAprendida}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="txtDescCierreLeccionAprendida" value="* Descripción:" style="font-weight: bold"></p:outputLabel>
                                                <p:inputTextarea id="txtDescCierreLeccionAprendida" value="#{programaController.leccionAprendidaProgramaSelected.descripcion}"
                                                                 cols="90" rows="5" maxlength="150"
                                                                 required="#{not empty param['formPrincipal:btnGrabarCierreLeccionAprendida']}">
                                                </p:inputTextarea>

                                            </h:panelGrid>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel value="Listado de lecciones aprendidas:" style="font-weight: bold"/>
                                <p:dataTable value="#{programaController.programaSelected.leccionAprendidaList}" var="leccion"
                                             paginator="true" rows="10" 
                                             rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                             emptyMessage="No se encontraron resultados">
                                    <p:column headerText="Nro." width="20" >
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Descripción" sortBy="#{leccion.descripcion}">
                                        <h:outputText value="#{leccion.descripcion}"></h:outputText>
                                    </p:column>
                                    <p:column headerText="Editar" width="50" style ="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro"
                                                         disabled="#{!programaController.permitirEdicionCierre}"
                                                         update=":formPrincipal:panelEdicionCierreLeccionAprendida"
                                                         >
                                            <f:setPropertyActionListener value="#{leccion}" target="#{programaController.leccionAprendidaProgramaSelected}"/>
                                        </p:commandButton>
                                    </p:column>                                         

                                    <p:column headerText="Eliminar" width="50" style="text-align: center" >
                                        <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{programaController.eliminarCierreLeccionAprendida}"
                                                         disabled="#{!programaController.permitirEdicionCierre}"
                                                         update=":formPrincipal:panelCierreLeccionAprendida, :formPrincipal:message1 ">
                                            <f:setPropertyActionListener value="#{leccion}" target="#{programaController.leccionAprendidaProgramaSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado ?" icon="ui-icon-alert" />
                                        </p:commandButton>  
                                    </p:column>

                                </p:dataTable>                                               
                            </p:panel>                    


                            <!--panelFinalizarCierre-->
                            <p:panel id="panelFinalizarCierre" rendered="#{programaController.selectedNodeCode=='3.4'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarCierre" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE CIERRE">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{programaController.programaSelected.mensajePermitirFinalizarCierre}" style="color:red"></p:outputLabel>
                                            <p:outputLabel value="Listado de proyectos:"></p:outputLabel>
                                            <p:dataTable paginator="true" rows="5" rowIndexVar="index" value="#{programaController.programaSelected.proyectoActivoList}" var="proySinCerrar"
                                                         >
                                                <p:column headerText="Nro." style="width:20px;text-align: center" >
                                                    <h:outputText value="#{index + 1}" />
                                                </p:column>
                                                <p:column headerText="Código" style="width: 100px; white-space: pre-line" sortBy="#{proySinCerrar.codigo}">
                                                    <h:outputText  value ="#{proySinCerrar.codigo}"/> 
                                                </p:column>
                                                <p:column headerText="Nombre" style="white-space: pre-line" sortBy="#{proySinCerrar.nombre}">
                                                    <h:outputText  value ="#{proySinCerrar.nombre}"/> 
                                                </p:column>
                                                <p:column headerText="Departamento" style="width: 160px; white-space: pre-line" sortBy="#{proySinCerrar.departamento.stvsubjDesc}">
                                                    <h:outputText  value ="#{proySinCerrar.departamento.stvsubjDesc}"/> 
                                                </p:column>
                                                <p:column headerText="Convocatoria" style="width: 200px; white-space: pre-line" sortBy="#{proySinCerrar.convocatoria.nombre}">
                                                    <h:outputText  value ="#{proySinCerrar.convocatoria.nombre}"/> 
                                                </p:column>
                                                <p:column headerText="Estado" style="width: 120px; white-space: pre-line" sortBy="#{proySinCerrar.estadoStr}">
                                                    <h:outputText  value ="#{proySinCerrar.estadoStr}"/> 
                                                </p:column>                                                
                                            </p:dataTable>

                                            <p:outputLabel rendered="#{programaController.programaSelected.estado=='CES' and programaController.programaSelected.mensajePermitirCierre==''}" value="Una vez finalizado el proceso, no se podrá modificar la información registrada del cierre del programa..." style="font-weight: bold"></p:outputLabel>
                                            <p:outputLabel rendered="#{programaController.programaSelected.estado=='CER' or programaController.programaSelected.estado=='EVA'}" value="Proceso de cierre Finalizado" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>
                                            <h:panelGrid columns="2">
                                                <p:outputLabel for="txtFechaCierre" value="* Fecha Cierre:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaCierre" navigator="true" value="#{programaController.programaSelected.fechaCierre}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="#{!programaController.permitirFinalizarCierre}"
                                                                required="#{not empty param['formPrincipal:btnFinalizarCierre']}">
                                                    </p:calendar>
                                                    <p:message for="txtFechaCierre"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>


                                            <p:commandButton id="btnFinalizarCierre" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{!programaController.permitirFinalizarCierre}"
                                                             update=":formPrincipal:panelFinalizarCierre, :formPrincipal:panelTitulo,  :formPrincipal:message1" 
                                                             action ="#{programaController.finalizarCierre}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el proceso de cierre del programa ?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>  

                            <!--panelEvaluadorFinal-->
                            <p:panel id="panelEvaluadorFinal" rendered="#{programaController.selectedNodeCode=='4.4'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionEvaluadorFinal" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:outputLabel value="#{programaController.programaSelected.mensajePermitirEvaluacionFinal}" style="color:red"></p:outputLabel>
                                    <h:panelGrid columns="2" rendered="#{!programaController.modoEdicion}">
                                        <p:commandButton value="Editar" title="Editar" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionEvaluadorFinal"
                                                         disabled="#{!programaController.permitirDesignarEvaluador}"
                                                         actionListener="#{programaController.seleccionarEdicion}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>


                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%">
                                        <p:fieldset legend="EVALUADOR FINAL DEL PROGRAMA">
                                            <h:panelGrid columns="2" cellpadding="0" rendered="#{programaController.modoEdicion}" cellspacing="5" style="margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarEvaluadorFinal" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelEvaluadorFinal, :formPrincipal:message1" 
                                                                 action ="#{programaController.grabarEvaluadorFinal()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelEvaluadorFinal" 
                                                                 action="#{programaController.cancelarEvaluadorFinal}">
                                                </p:commandButton>
                                            </h:panelGrid>     
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-top: 10px; margin-bottom: 10px" columnClasses="col1_evaluador_final">
                                                <p:outputLabel value="* Cédula:" style="font-weight: bold"/>
                                                <h:panelGrid columns="4" >
                                                    <p:commandButton  title="Buscar Docente" icon="ui-icon-search"
                                                                      disabled="#{!programaController.modoEdicion}"
                                                                      actionListener="#{programaController.abrirBusquedaDocenteEvaluador}">
                                                        <p:ajax event="dialogReturn" listener="#{programaController.seleccionarEvaluadorFinal}" update=":formPrincipal:panelEdicionEvaluadorFinal, :formPrincipal:message1"
                                                                onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                    </p:commandButton>
                                                    <p:inputText id="txtCedulaEvaluadorFinal" style="width: 100px" value="#{programaController.docenteSelected.usuario.usuCc}" disabled ="true">
                                                    </p:inputText>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Nombres:" for="txtNombresEvaluadorFinal" style="font-weight: bold"/>
                                                <p:inputText id="txtNombresEvaluadorFinal" style="width: 250px"
                                                             value="#{programaController.docenteSelected.usuario.usuNombres}"
                                                             disabled ="true">
                                                </p:inputText>

                                                <p:outputLabel value="* Apellidos:" for="txtApellidosEvaluadorFinal" style="font-weight: bold"/>
                                                <p:inputText id="txtApellidosEvaluadorFinal" style="width: 250px; margin-bottom: 10px;"
                                                             value="#{programaController.docenteSelected.usuario.usuApellidos}"
                                                             disabled ="true">
                                                </p:inputText>

                                            </h:panelGrid>                                            
                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>

                            </p:panel>


                            <!--panelEvaluacionCuantitativa-->
                            <p:panel id="panelEvaluacionCuantitativa" rendered="#{programaController.selectedNodeCode=='4.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Evaluación por proyecto:" style="font-weight: bold"/>
                                    <p:dataTable value="#{programaController.programaSelected.proyectoActivoList}" var="proyEva"
                                                 paginator="true" rows="10" 
                                                 rowIndexVar="index" resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 

                                        <p:column headerText="Nro." width="20" style="text-align: center">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Proyecto" style="white-space: pre-line; ">
                                            <h:outputText value="#{proyEva.nombre}"/>
                                        </p:column>
                                        <p:column headerText="Análisis de Pertinencia" width="70"  style="white-space: pre-line; text-align: center">
                                            <h:outputText value="#{proyEva.puntajeEvaluacionPertinencia.toString().concat(' / ').concat(proyEva.puntajeEvaluacionPertinenciaMaximo)}"
                                                          rendered="#{proyEva.estadoFinalizado}"/>
                                        </p:column>
                                        <p:column headerText="Análisis de Eficacia" width="70" style="white-space: pre-line; text-align: center">
                                            <h:outputText value="#{proyEva.puntajeEvaluacionEficacia.toString().concat(' / ').concat(proyEva.puntajeEvaluacionEficaciaMaximo)}"
                                                          rendered="#{proyEva.estadoFinalizado}"/>
                                        </p:column>
                                        <p:column headerText="Análisis de Eficiencia" width="70" style="white-space: pre-line; text-align: center">
                                            <h:outputText value="#{proyEva.puntajeEvaluacionEficiencia.toString().concat(' / ').concat(proyEva.puntajeEvaluacionEficienciaMaximo)}"
                                                          rendered="#{proyEva.estadoFinalizado}"/>
                                        </p:column>
                                        <p:column headerText="Análisis de Sostenibilidad" width="70" style="white-space: pre-line; text-align: center">
                                            <h:outputText value="#{proyEva.puntajeEvaluacionSostenibilidad.toString().concat(' / ').concat(proyEva.puntajeEvaluacionSostenibilidadMaximo)}"
                                                          rendered="#{proyEva.estadoFinalizado}"/>
                                        </p:column>
                                        <p:column headerText="Puntaje Total" width="70" style="white-space: pre-line; text-align: center">
                                        <h:outputText value="#{proyEva.puntajeTotalEvaluacionFinal.toString().concat(' / ').concat(proyEva.puntajeEvaluacionMaximo)}"
                                                      rendered="#{proyEva.estadoFinalizado}"/>
                                    </p:column>

                                    </p:dataTable>                                  
                                </h:panelGrid>
                            </p:panel>                              

                            <!--panelEvaluacionCualitativa-->
                            <p:panel id="panelEvaluacionCualitativa" rendered="#{programaController.selectedNodeCode=='4.2'}" style="border: hidden; padding-left: 20px">
                                <p:outputLabel value="#{programaController.programaSelected.mensajePermitirEvaluacionFinal}" style="color:red"></p:outputLabel>
                                <h:panelGrid columns="2" cellpadding="7">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{programaController.seleccionarEdicion}"
                                                     disabled="#{!programaController.permitirEvaluacion}"
                                                     rendered="#{!programaController.modoEdicion}"
                                                     update=":formPrincipal:panelEvaluacionCualitativa" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarEvaluacionCualitativa" value="Grabar" icon="ui-icon-locked"
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Graba Información" update=":formPrincipal:panelEvaluacionCualitativa, :formPrincipal:message1" action="#{programaController.grabarEvaluacionCualitativa}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton value="Cancelar" icon="ui-icon-arrowreturnthick-1-w"
                                                     rendered="#{programaController.modoEdicion}"
                                                     title="Cancela Información" update=":formPrincipal:panelEvaluacionCualitativa" action="#{programaController.cancelarEvaluacionCualitativa}">
                                    </p:commandButton>                                     
                                </h:panelGrid>
                                <h:panelGrid columns="1" cellpadding="1">
                                    <p:outputLabel for="txtEvaluacionCualitativa" value="* Evaluacion cualitativa:" style="font-weight: bold"/>
                                    <p:message for="txtEvaluacionCualitativa"></p:message>
                                    <p:inputTextarea id="txtEvaluacionCualitativa" cols="120" rows="8" maxlength="1000" 
                                                     value="#{programaController.programaSelected.evaluacionCualitativa}" 
                                                     disabled="#{!programaController.modoEdicion}"
                                                     required="#{not empty param['formPrincipal:btnGrabarEvaluacionCualitativa']}"></p:inputTextarea>

                                </h:panelGrid>                                
                            </p:panel>  


                            <!--panelFinalizarEvaluacionFinal-->
                            <p:panel id="panelFinalizarEvaluacionFinal" rendered="#{programaController.selectedNodeCode=='4.3'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarEvaluacionFinal" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE EVALUACION FINAL">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{programaController.programaSelected.mensajePermitirFinalizarEvaluacionFinal}" style="color:red"></p:outputLabel>
                                            <p:dataTable paginator="true" rows="5" rowIndexVar="index" value="#{programaController.programaSelected.proyectoActivoList}" var="proySinEvaluar"
                                                         rendered="#{programaController.programaSelected.proyectoSinEvaluarList.size()>0}">
                                                <p:column headerText="Nro." style="width:20px;text-align: center" >
                                                    <h:outputText value="#{index + 1}" />
                                                </p:column>
                                                <p:column headerText="Código" style="width: 100px; white-space: pre-line" sortBy="#{proySinEvaluar.codigo}">
                                                    <h:outputText  value ="#{proySinEvaluar.codigo}"/> 
                                                </p:column>
                                                <p:column headerText="Nombre" style="white-space: pre-line" sortBy="#{proySinEvaluar.nombre}">
                                                    <h:outputText  value ="#{proySinEvaluar.nombre}"/> 
                                                </p:column>
                                                <p:column headerText="Departamento" style="width: 160px; white-space: pre-line" sortBy="#{proySinEvaluar.departamento.stvsubjDesc}">
                                                    <h:outputText  value ="#{proySinEvaluar.departamento.stvsubjDesc}"/> 
                                                </p:column>
                                                <p:column headerText="Convocatoria" style="width: 200px; white-space: pre-line" sortBy="#{proySinEvaluar.convocatoria.nombre}">
                                                    <h:outputText  value ="#{proySinEvaluar.convocatoria.nombre}"/> 
                                                </p:column>
                                                <p:column headerText="Estado" style="width: 120px; white-space: pre-line" sortBy="#{proySinEvaluar.estadoStr}">
                                                    <h:outputText  value ="#{proySinEvaluar.estadoStr}"/> 
                                                </p:column>                                                
                                            </p:dataTable>                                            
                                            <p:outputLabel rendered="#{programaController.programaSelected.mensajePermitirFinalizarEvaluacionFinal=='' and programaController.programaSelected.estado!='EVA'}" value="Una vez finalizado el proceso, no se podrá modificar la información del proyecto..." style="font-weight: bold"></p:outputLabel>
                                            <p:outputLabel rendered="#{programaController.programaSelected.estado=='EVA'}" value="Proceso de evaluación Finalizado" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>

                                            <h:panelGrid columns="2">
                                                <p:outputLabel for="txtFechaEvaluacion" value="* Fecha Evaluación:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaEvaluacion" navigator="true" value="#{programaController.programaSelected.fechaEvaluacionFinal}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="#{!programaController.permitirFinalizarEvaluacion}"
                                                                required="#{not empty param['formPrincipal:btnFinalizarEvaluacionFinal']}">
                                                    </p:calendar>
                                                    <p:message for="txtFechaEvaluacion"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>


                                            <p:commandButton id="btnFinalizarEvaluacionFinal" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{!programaController.permitirFinalizarEvaluacion}"
                                                             update=":formPrincipal:panelFinalizarEvaluacionFinal,  :formPrincipal:panelTitulo,  :formPrincipal:message1"
                                                             action ="#{programaController.finalizarEvaluacionFinal}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el proceso de evaluación del programa ?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>  



                        </p:panel>
                    </h:panelGrid>
                </p:panel>

                <!--Dialog tab 4-->
                <p:dialog id="dialogDeleteObjetivosPlanBVivir" header="Confirmación" widgetVar="dialogDeleteObjetivosPlanBVivir" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el objetivo seleccionado?" style="font-size: 11px; text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteObjetivosPlanBVivir').hide();">
                                    <p:ajax update="formPrincipal:dataTableObjPlan, :formPrincipal:p4,:formPrincipal:h4, :formPrincipal:message1 " listener ="#{programaController.eliminarP4()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteObjetivosPlanBVivir').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>

                <!--Dialog tab de los sub-Objetivos-->
                <p:dialog id="deleteDial41" header="Eliminar Registro" widgetVar="dialogDeletetab41" resizable="false" width="500" modal="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form id="deleteFormtab41">
                        <p:outputPanel id="panelDeletetab41">
                            <center>
                                <h:panelGrid id="deleteDialog" columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el registro.?" style="font-size: 11px"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>
                <!--Dialog tab 2-->
                <p:dialog id="dialogDeleteEntidadEjecutora" header="Confirmación" widgetVar="dialogDeleteEntidadEjecutora" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar la entidad seleccionada?" style="font-size: 11px; text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteEntidadEjecutora').hide();">
                                    <p:ajax update=":formPrincipal:dataTableProgVin, :formPrincipal:p2,:formPrincipal:h2, :formPrincipal:message1" listener ="#{programaController.eliminarP2()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteEntidadEjecutora').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>        

                <!--dialog tab6-->
                <p:dialog id="dialogDeleteObjetivoPlanVinculacion" header="Confirmación" widgetVar="dialogDeleteObjetivoPlanVinculacion" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el objetivo seleccionado?" style="font-size: 11px; text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteObjetivoPlanVinculacion').hide();">
                                    <p:ajax update=":formPrincipal:dataTableObjPlanVin, :formPrincipal:p6,:formPrincipal:h6, :formPrincipal:message1" listener ="#{programaController.eliminarP6()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteObjetivoPlanVinculacion').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>         

                <!--dialog tab 7-->
                <p:dialog id="dialogDeleteEstrategiaPlanVinculacion" header="Confirmación" widgetVar="dialogDeleteEstrategiaPlanVinculacion" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar la estrategia seleccionada?" style="font-size: 11px; text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteEstrategiaPlanVinculacion').hide();">
                                    <p:ajax update=":formPrincipal:dataTableEstPlanVin, :formPrincipal:h7, :formPrincipal:p7, :formPrincipal:message1" listener ="#{programaController.eliminarP7()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteEstrategiaPlanVinculacion').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>
                <!--Dialog tab 10-->
                <p:dialog id="dialogDeleteDepartamentoPrograma" header="Confirmación" widgetVar="dialogDeleteDepartamentoPrograma" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el item seleccionado?" style="font-size: 11px; text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteDepartamentoPrograma').hide();">
                                    <p:ajax update=":formPrincipal:dataTableDeptPart, :formPrincipal:p10,:formPrincipal:h10, :formPrincipal:message1" listener ="#{programaController.eliminarP10()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteDepartamentoPrograma').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>        
                <!--Dialog tab 11-->
                <p:dialog id="dialogDeleteCarreraPrograma" header="Confirmación" widgetVar="dialogDeleteCarreraPrograma" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar la carrera seleccionada?" style="font-size: 11px; text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteCarreraPrograma').hide();">
                                    <p:ajax update=":formPrincipal:dataTableCarrPart, :formPrincipal:p11,:formPrincipal:h11, :formPrincipal:message1" listener ="#{programaController.eliminarP11()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDe
                                            leteCarreraPrograma').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>        


                <p:dialog id="dialogDeletePrograma" header="Confirmación" widgetVar="dialogDeletePrograma" resizable="false" width="400" modal="true" closeOnEscape="true" style="font-size: 11px; text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el programa actual ?" style="font-size: 11px"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeletePrograma').hide();">
                                    <p:ajax update=":formPrincipal:panelCentral, :formPrincipal:message1" listener ="#{programaController.eliminarPrograma()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeletePrograma').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>


            </ui:define>
        </ui:composition>
    </h:body>
</html>

